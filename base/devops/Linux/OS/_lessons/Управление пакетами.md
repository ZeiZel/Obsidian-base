
## Установка ПО

Есть несколько основных вариантов установки пакетов в линуксе:
1. Установка из исходников. Самостоятельная сборка и установка пакета в линукс без надобности в рутправах.
2. Установка из пакетов. Устанавливаются заранее собранные пакеты (deb, rpm) пакетным менеджером для определённой системы. Все пакеты привязаны к определённому дистрибутиву
3. Установка из репозитория. Тут мы запрашиваем сам пакетный менеджер установить пакет в систему тз открытого репозитория. ПМ сам устанавливает остальные зависимости, которые требуются для пакета. К этому способу относятся подобные команды: `sudo dnf install git neovim nodejs npm`.

![](_png/08e16f7724f15baafd945aca55e37ae2.png)

![](_png/50202f8829c948918454c3cdaaa04fca.png)

## Пакеты в Linux

На рынке преобладают два основных вида пакетов - `.deb` и `.rpm`

![](_png/4c993577fc07d72d9cc84863d8e3552d.png)

RHEL - корпортативное решение, а CentOS - решение для домашнего пользования на базе RHEL. Первый имеет стабильную работу и обновления для поддержки системы.

![](_png/80d276fcdb0c3019542deca68f0dab86.png)

Пакет - это сжатый архив, который хранит все файлы, которые требуются для работы программы.

Сам пакет так же в себе хранит манифест со списком требуемых зависимостей.

Так как каждая оболочка линукса отличается друг от друга достаточно сильно (версия ядра, доступные пакеты и способы работы), то и пакеты зачастую между друг другом несовместимы

![](_png/6b623d654b91239b1e5883fa721c8870.png)

Основными задачами пакетного менеджера являются:
- установка пакета из проверенного источника
- проверка целостности пакетов
- избегания ==адской матрицы пакетов==

`DPKG` и `RPM` - типы менеджеров пакетов
`APT` и `DNF` - интерфейсы над этими типами менеджеров пакетов с расширенным функционалом и упрощённой работой

`dnf` является улучшением над `yum`

![](_png/e34a5e8ebc8593732bdb48b69fec4b22.png)

## RPM и YUM

`rpm` - Команда для работа с  `.rpm` пакетами

Первая команда позвоялет нам установить пакет. `-i` - установка пакета, `-v` - проверка пакета, `-h` - сверка хешей

`-e` - удаление пакета из системы
`-q` - позволяет получить информацию о пакете из базы данных rpm-пакетов. База данных хранится в каталоге `/var/lib/rpm`
`-V` - проверяет конечный пакет с информацией из исходного пакета

![](_png/2d19978471cbf2f94957c62e1076ec03.png)

В противовес `rpm` не разрешает самостоятельно зависимости пакетов, поэтому и используют `yum`.

Все доступные репозитории юма сохраняются в `/etc/yum.repos.d`. Туда мы можем добавить любые свои другие списки репозиториев.

![](_png/c20615ed770dc1579be41722a0e48f69.png)

`yum` проверяет пакеты в системе, пытается их зарезолвить, если не нашёл пакет, то предложит его установить из своих репозиториев

> Если добавить флаг `-y`, то дополнительные пакеты установятся без дополнительного подтверждения с помощью `y`

![](_png/619f398c825748a1a42291c3f0569959.png)

`yum repolist` предоставляет список доступных репозиториев
`yum provides scp` предоставит нам репозитории, которые распротраняют пакет `scp`

![](_png/5d6bfa447e290c9c58ade75448bb701d.png)

`yum remove httpd` - удалит пакет и его зависимости
`yum update telnet` - обновит пакет `telnet`

Если просто вызывать `yum update`, то мы обновим все пакеты в системе.

![](_png/4f49f9ea75845573e22aed14414f0607.png)

## DPKG и APT

`dpkg` - низкоуровневый пакет для работы с другими пакетами debian-дистрибутивов. Он так же как и `rpm` не умеет работать с требуемыми зависимостями для установки пакета.

`-i` - установка пакета
`-u` - обновление пакета
`-r` - удаление пакета
`-l` - список установленных пакетов
`-s` - отобразит статус пакета, если он установлен в систему
`-V` - проверка пакета

![](_png/dedf8fdea9f4832a0fdca0c25c9b6d55.png)

Пример ошибки из-за неразрешения зависимостей

![](_png/3206ed2eb2ac7320fcd168ee29435c4c.png)

Поэтому для того, чтобы устанавливать пакеты, используются более высокоуровневые пакеты `apt` и `apt-get`, которые используют у себя внутри `dpkg`

У `apt`, так же как и у `yum` используется свой прописанный список репозиториев в `/etc/apt/sources.list`

![](_png/286e5f5c99128b092e539d60763fff5d.png)

У `apt` достаточно широкий список команд.

Сразу после установки системы стоит обновить список пакетов через `update`, а затем и обновить сами пакеты `upgrade`. 

`edit-sources` позволит быстро перейти в файл репозиториев и отредактировать его

![](_png/434cbdf9c3307646e961383c07e4a2d4.png)

## APT и APT-GET

Изначально стоит сказать, что `apt` - это мощный инструмент, который хранит в себе множество различных операций над пакетами.

Первое, что бросается в глаза - это более приятный глазу вывод в консоль, который более человекочитаем.

![](_png/31e1120b0ec107a835d0604cbb132db1.png)

Так же `apt` умеет сам искать пакеты в репозиториях. Отдельно `apt-get` этого не умеет, поэтому вместо него нужно использовать `apt-cache`.

![](_png/ec5eb439b94679497d9cef5d389a8cba.png)
