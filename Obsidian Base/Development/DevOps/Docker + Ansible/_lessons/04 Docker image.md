
## Что такое image

### Состав изображения

Для начала скачаем образ nginx с docker hub с помощью docker daemon

```bash
docker pull nginx
```

Как можно заметить, докер скачивает не целиковый образ, а отдельные слои (aka *layers*, из которых состоит образ). Каждый образ подписан уникальным идентификатором. Такой подход позволяет экономить пространство на диске.

![](_png/Pasted%20image%2020240811190542.png)

По-факту, каждый слой - это отдельный образ, который доступен только на Read (чтение). После создания контейнера из image, у нас создастся тонкий слой, который будет доступен для записи информации (ReadWrite).

Это приводит к тому, что сколько бы мы не запустили разных контейнеров изображения, image, на котором (например) nginx будет базироваться, останется всегда один.

![](_png/Pasted%20image%2020240811191349.png)

### Внутрянка image

Теперь мы можем посмотреть, что находится внутри изображения в докере.

Для начала просмотрим список изображений

```bash
docker images
```

![](_png/Pasted%20image%2020240811191415.png)

Чтобы сохранить архив с внутренними файлами изображения, можно воспользоваться следующей командой

> Сразу можно сказать, что данный способ может пригодиться, когда наша машина не имеет доступа в интернет и в неё можно передать изображение только таким образом.

```bash
docker save --output nginx.tar nginx
mkdir nginx
tar xvf nginx.tar -C nginx
```

Ну и в манифесте можно просмотреть все ссылки на остальные слои изображения.

Структура каждого слоя выглядит похожим образом. Даже можно сказать, что layer - это тоже image, который содержит определённую информацию.

Такая иерархия очень похожа на стандартную работу пакетного менеджера, который собирается из других пакетов.

![](_png/Pasted%20image%2020240811192302.png)

Так же в отдельном слое может находиться и внутренность его файловой системы

![](_png/Pasted%20image%2020240811192908.png)

Так же мы можем вывести историю,  по которой мы можем понять, как был собран тот или иной image. История снизу вверх идёт и отображает последовательность операций сборки

```bash
docker history <package>
```

![](_png/Pasted%20image%2020240811193104.png)

`7:09`







## 002 Работа с image








## 003 Dockerfile








## 004 Создаем свой image








## 005 Улучшаем сборку








## 006 Анализируем image








## 007 Многоэтапная сборка








## 008 Упражнение - Сборка go проекта





















