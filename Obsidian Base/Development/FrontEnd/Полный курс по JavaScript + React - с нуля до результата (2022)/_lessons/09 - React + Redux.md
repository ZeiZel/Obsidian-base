#Redux #React 

## 001 –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã Redux. –¢–µ–æ—Ä–∏—è


–†–∞–±–æ—Ç–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —Å–æ —Å—Ç–µ–π—Ç–æ–º - —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø–∏—Å–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–æ –∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–µ—Å–ª–æ–∂–Ω–æ–π –∑–∞–¥–∞—á–µ–π.

–ü–µ—Ä–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É –Ω–∞—Å –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –≤–Ω–∏–∑, –∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –≤–≤–µ—Ä—Ö —á–µ—Ä–µ–∑ –∫–æ–ª–ª–±—ç–∫–∏
- –¢–∞–∫ –∂–µ –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–æ–Ω–∏ –≤—Å–µ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ - –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `App`)

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ==Property Drill==, –∫–æ–≥–¥–∞ –º—ã –ø—Ä–æ—Å–≤–µ—Ä–ª–∏–≤–∞–µ–º –ø—É—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ —É—Ä–æ–≤–Ω—è–º —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–æ–≥–∏—á–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–±–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –¥–ª—è –Ω–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–ª—å—à–µ.

–í—Ç–æ—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —É–∂–µ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É —Å–µ–±—è (–æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –∞ –¥—Ä—É–≥–æ–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∏–∫—Å–æ–≤, —Ç—Ä–µ—Ç–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–¥–Ω–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ)

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Å–ª–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ, –µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

![](_png/7c3274e3c09c1f2ef3d1087d21826e83.png)

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –±—ã–ª–∏ –ø—Ä–∏–¥—É–º–∞–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, —Ç–∞–∫–∏–µ –∫–∞–∫ ==MVC==, ==MVP==, ==MVVM==

![](_png/bdfd2647518b0b1998c80d6d043e1a13.png)

–ò —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—Ç–µ–π—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –û–¥–Ω–∞–∫–æ —Ç—É—Ç –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π, —á—Ç–æ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞—à –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç

![](_png/87f733b02e665518085856aa2af1fb9e.png)

–ò —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —É–∂–µ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, –±—ã–ª –ø—Ä–∏–¥—É–º–∞–Ω —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–¥—Ö–æ–¥:
- –ú—ã –∏–º–µ–µ–º –Ω–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã **View**, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ–∑–¥–∞—é—Ç **Actions** (–∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤ —Å—Ç–µ–π—Ç–µ)
- –û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è **Actions** (–∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–µ–±—É–µ–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö) –≤—ã–∑—ã–≤–∞—é—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ **Reducer** (–∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç —Å—Ç–µ–π—Ç). –û–ø–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –æ–±—ä–µ–∫—Ç–∞ **Actions** –≤ **Reducer** –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ==dispatch==
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç **Reducer** - —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–±—â–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å—Ç–µ–π—Ç–æ–≤ –∏ –æ–Ω –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ª—é–±–æ–º –∑–∞–ø—Ä–æ—Å–µ –æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∞–π—Ç–∞. –¢–æ –µ—Å—Ç—å –æ–Ω —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–µ–π—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ **S**, —á—Ç–æ–±—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥–ª–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å—Å—è –Ω–∞ –±–∞–∑–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç **S** —Ç–∞–∫ –∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ —Å–∞–º –ø–æ —Å–µ–±–µ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. 

–¢–∞–∫ –∂–µ –≤ ==Redux== –∏–º–µ—é—Ç—Å—è ==—Å–µ–ª–µ–∫—Ç–æ—Ä—ã== - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–∏–∑ **S** –≤–æ **View**)

![](_png/4fb838616d62005505eca2d7c9c6fd3e.png)

–ò –≤–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ä–∞–±–æ—Ç–∞ —Å—Ç–µ–π—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ. –ò–∑ `State` –ø—Ä–æ—à–ª—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ `Reducer`, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

–ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–π –∂–µ –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ —Ö—É–∫–µ `useReducer`.

![–ì–∏—Ñ–∫–∞ —Ä–∞–±–æ—Ç—ã Redux —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://d33wubrfki0l68.cloudfront.net/01cc198232551a7e180f4e9e327b5ab22d9d14e7/b33f4/assets/images/reduxdataflowdiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif)

–ò —Ç—É—Ç –≤–∞–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å, —á—Ç–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –≤ —Ç—Ä—ë—Ö —Ä–∞–∑–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ö –ª–µ–≥–∫–æ, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å. —á—Ç–æ –∏—â–µ–º:

![](_png/9d8ead89c25d29fb062bcef35c46411d.png)

![](_png/5f913d27458a4c0b8176dadfa56d6194.png)

![](_png/adc833e3abda852d1f6f9fe5e8d0cb93.png)

–¢–∞–∫ –∂–µ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–¥–∞–∫—Å–æ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:

![](_png/d25df2e601565b20620b5bb5c6cfd73b.png)


## 002 –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã Redux. –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ä–µ–¥–∞–∫—Å–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm i redux react-redux
```

–î–∞–ª—å—à–µ —Ä–∞—Å–ø–∏—à–µ–º –±–∞–∑–æ–≤—É—é —Å—Ö–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Ä–∞–±–æ—Ç—ã —Ä–µ–¥–∞–∫—Å–∞:
- –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- —Ñ—É–Ω–∫—Ü–∏—è-—Ä–µ–¥—å—é—Å–µ—Ä
- —Å—Ç–µ–π—Ç

```JS
// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState = 0;

// —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞
const reducer = (state, action) => {
	if (action.type === 'INC') {
		return state + 1;
	}
	return 0;
};

// —Å—Ç–µ–π—Ç
const state = reducer(initialState, { type: 'INC' });

console.log('State after reducer = ' + state);
```

![](_png/ab43c66008dc18cdee71c6de7645cb64.png)

–£–∂–µ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥—å—é—Å–µ—Ä–∞ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∞ –ª–∞–∫–æ–Ω–∏—á–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ –¥–µ–π—Å—Ç–≤–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ

```JS
const reducer = (state = 0, action) => {
	switch (action.type) {
		case 'INC':
			return state + 1;
		case 'DEC':
			return state - 1;
		default:
			return state;
	}

	return 0;
};
```

–ò —Ç—É—Ç –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å—Ç–æ–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –≤ —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å `undefined`, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–µ

![](_png/dde820134b8651b1028b5159d0f4b6a1.png)

–ù—É –∏ –¥–∞–ª–µ–µ —Å–æ–∑–¥–∞–¥–∏–º –µ–¥–∏–Ω—ã–π —Å—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä. –û–±—ã—á–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å—Ç–æ—Ä 

```JS
import { createStore } from 'redux';

// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState = 0;

// —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞
const reducer = (state = 0, action) => {
	switch (action.type) {
		case 'INC':
			return state + 1;
		case 'DEC':
			return state - 1;
		default:
			return state;
	}

	return 0;
};

// —ç—Ç–æ —Å—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä –∏ –≤—Å–µ —Å—Ç–µ–π—Ç—ã
const store = createStore(reducer);

// –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é reducer –∏ –ø–µ—Ä–µ–¥–∞—ë–º –≤ –Ω–µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ
store.dispatch({ type: 'INC' });

console.log('Value in state = ' + store.getState());
```

![](_png/7f88bed5d6451057bc1ea84cdc649a16.png)

–¢–∞–∫ –∂–µ –º—ã –º–æ–∂–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–æ—Ä–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```JS
// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState = 0;

// —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞
const reducer = (state = 0, action) => {
	switch (action.type) {
		case 'INC':
			return state + 1;
		case 'DEC':
			return state - 1;
		default:
			return state;
	}

	return 0;
};

// —ç—Ç–æ —Å—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä –∏ –≤—Å–µ —Å—Ç–µ–π—Ç—ã
const store = createStore(reducer);

// –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–µ–π—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å—Ç–æ—Ä–∞
store.subscribe(() => {
	console.log('Value in state = ' + store.getState());
});

// –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é reducer –∏ –ø–µ—Ä–µ–¥–∞—ë–º –≤ –Ω–µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ
store.dispatch({ type: 'INC' });
store.dispatch({ type: 'INC' });
```

![](_png/74b1417834efbe320877ead56dc58ec0.png)

>[!info] –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å Reducer:
> - –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å—Ç–æ–π –∏ –∑–∞–≤–∏—Å–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç –ø—Ä–∏—Ö–æ–¥—è—â–µ–≥–æ –≤ –Ω–µ—ë —Å—Ç–µ–π—Ç–∞ –∏ —ç–∫—à–µ–Ω–∞
> - –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö –∏ –Ω–µ –∏–º–µ—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–Ω–∏–∫–∞–∫–∏—Ö –ª–æ–≥–æ–≤, –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –∏ –Ω–∏–∫–∞–∫–æ–π —Ä–∞–±–æ—Ç—ã —Å –î–û–ú-–¥–µ—Ä–µ–≤–æ–º)

–í—ë—Ä—Å—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫

```HTML
<div id="rooter" class="jumbotron">
	<h1 id="counter">0</h1>
	<button id="dec" class="btn btn-primary1">DEC</button>
	<button id="inc" class="btn btn-primary1">INC</button>
	<button id="rnd" class="btn btn-primary1">RND</button>
</div>
```

–°—Ç–∏–ª–∏

```CSS
.jumbotron {
  display: flex;
  justify-content: center;
  align-items: center;

  width: 99vh;
  height: 99vh;
}
```

–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–¥–∞–∫—Å–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:

```JS
// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState = 0;

// —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞
const reducer = (state = 0, action) => {
	switch (action.type) {
		case 'INC':
			return state + 1;
		case 'DEC':
			return state - 1;
		case 'RND':
			return state * action.payload;
		default:
			return state;
	}

	return 0;
};

// —ç—Ç–æ —Å—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä –∏ –≤—Å–µ —Å—Ç–µ–π—Ç—ã
const store = createStore(reducer);

const updateCounter = () => {
	document.getElementById('counter').textContent = store.getState();
};

// –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–µ–π—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å—Ç–æ—Ä–∞
store.subscribe(updateCounter);

document.getElementById('inc').addEventListener('click', () => {
	store.dispatch({ type: 'INC' });
});

document.getElementById('dec').addEventListener('click', () => {
	store.dispatch({ type: 'DEC' });
});

document.getElementById('rnd').addEventListener('click', () => {
	const value = Math.floor(Math.random() * 10);
	store.dispatch({ type: 'RND', payload: value });
});
```

![](_png/59b8e06e97f57749d1982d8beb20803e.png)

–û—Ç–¥–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç–∞–∫ –¥–µ–ª–∞—Ç—å –Ω–µ–ª—å–∑—è –∏ –≤—ã—à–µ –±—ã–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ `payload` (–ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)

![](_png/866661b40865d1766a802050ac507f36.png)

–ò —Ç–∞–∫ –∂–µ –≤ ==Redux== –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `actionCreator` —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–∫—à–µ–Ω—ã. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ–¥—å—é—Å–µ—Ä–∞, —á—Ç–æ–±—ã –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ —Å—Ç–µ–π—Ç –ø–æ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º—É –ø—Ä–æ—Ö–æ–¥—É, –∞ –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç

```JS
// actionCreater'—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç —ç–∫—à–µ–Ω—ã –¥–ª—è —Ä–µ–¥—å—é—Å–µ—Ä–∞
const inc = () => ({ type: 'INC' });
const dec = () => ({ type: 'DEC' });
const rnd = (value) => ({ type: 'RND', payload: value });

document.getElementById('inc').addEventListener('click', () => {
	store.dispatch(inc());
});

document.getElementById('dec').addEventListener('click', () => {
	store.dispatch(dec());
});

document.getElementById('rnd').addEventListener('click', () => {
	const value = Math.floor(Math.random() * 10);
	store.dispatch(rnd(value));
});
```

–ù–æ —Ç–∞–∫ –∂–µ –º—ã –±—É–¥–µ–º —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –≤–∏–¥–µ –æ–±—ä–µ–∫—Ç–∞, –ø–æ—ç—Ç–æ–º—É –∏ –ø–∏—Å–∞—Ç—å –ø—Ä–∏–¥—ë—Ç—Å—è –∫–æ–¥ —Å–æ–±–ª—é–¥–∞—è –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å:
- –ø–µ—Ä–µ–≤–æ–¥–∏–º –Ω–∞—á–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç –≤ –æ–±—ä–µ–∫—Ç
- –º–µ–Ω—è–µ–º —Ä–µ–¥—å—é—Å–µ—Ä –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–æ —Å—Ç–µ–π—Ç–æ–º –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ (—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –æ–±—ä–µ–∫—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
- –¥–∞–ª–µ–µ –∏–∑ —Å—Ç–æ—Ä–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–µ —Ü–µ–ª—ã–π –æ–±—ä–µ–∫—Ç, –∞ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ `store.getState().value` 

```JS
// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState = { value: 0 };

// —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞
const reducer = (state = initialState, action) => {
	switch (action.type) {
		case 'INC':
			return { ...state, value: state.value + 1 };
		case 'DEC':
			return { ...state, value: state.value - 1 };
		case 'RND':
			return { ...state, value: state.value * action.payload };
		default:
			return state;
	}

	return 0;
};

// —ç—Ç–æ —Å—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä –∏ –≤—Å–µ —Å—Ç–µ–π—Ç—ã
const store = createStore(reducer);

const updateCounter = () => {
	document.getElementById('counter').textContent = store.getState().value;
};

// –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–µ–π—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å—Ç–æ—Ä–∞
store.subscribe(updateCounter);

// actionCreater'—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç —ç–∫—à–µ–Ω—ã –¥–ª—è —Ä–µ–¥—å—é—Å–µ—Ä–∞
const inc = () => ({ type: 'INC' });
const dec = () => ({ type: 'DEC' });
const rnd = (value) => ({ type: 'RND', payload: value });

document.getElementById('inc').addEventListener('click', () => {
	store.dispatch(inc());
});

document.getElementById('dec').addEventListener('click', () => {
	store.dispatch(dec());
});

document.getElementById('rnd').addEventListener('click', () => {
	const value = Math.floor(Math.random() * 10);
	store.dispatch(rnd(value));
});
```

–ò—Ç–æ–≥: –º—ã –∏–º–µ–µ–º –∫–∞—É–Ω—Ç–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –±–∞–∑–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Å –¥–∞–∂–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **React** –Ω–∞ —á–∏—Å—Ç–æ–º **JS** 

![](_png/7b7c0276df02f1babc736f34b6b03bc6.png)



## 003 –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏


–ü–æ–Ω—è—Ç–∏–µ —á–∏—Å—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å—Ö–æ–¥–∏—Ç –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–∞–º —ç—Ç–æ –∏–º–µ–µ—Ç—Å—è –≤–≤–∏–¥—É, –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –ø—Ä–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏

>[!info] –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —á–∏—Å—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
> - –ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
> - –û–Ω–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–≤–Ω–æ –ø–æ —Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ, —á—Ç–æ –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤ —Å–µ–±–µ –ø–æ–±–æ—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–∞–Ω–¥–æ–º–Ω–æ–µ —á–∏—Å–ª–æ)

![](_png/2b4fdc3c7eaa6a638d2e0eefc1c9ecfe.png)

–ò —Ç–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –ø–µ—Ä–µ–¥–µ–ª–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å—Ç–æ–π —Ä–æ–≤–Ω–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

![](_png/14ae831ab98a1e6de8a173bef3aa6dbe.png)

–¢–∞–∫ –∂–µ —Ç—É—Ç –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ - –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑–≤–Ω–µ –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ –º–æ–∂–µ—Ç 

![](_png/888fccf052ba4da10e7a3bb244ea9c17.png)

>[!danger] –ü–æ–±–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —á–∏—Å—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö:
> - –í—Å–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)
> - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
> - –í—ã–≤–æ–¥ –ª–æ–≥–æ–≤
> - –†–∞–±–æ—Ç–∞ —Å –î–û–ú-–¥–µ—Ä–µ–≤–æ–º
> - –í–∏–¥–æ–∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—ç—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏)


## 004 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ actionCreators –∏ bindActionCreator


–î–∞–ª–µ–µ –ø–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–±–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

–≠–∫—à–µ–Ω—ã –≤—ã–Ω–µ—Å–µ–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª

`actions.js`
```JS
export const inc = () => ({ type: 'INC' });
export const dec = () => ({ type: 'DEC' });
export const rnd = (value) => ({ type: 'RND', payload: value });
```

–°–∞–º —Ä–µ–¥—å—é—Å–µ—Ä —É–±–µ—Ä—ë–º –≤ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª

`reducer.js`
```JS
const initialState = { value: 0 };

const reducer = (state = initialState, action) => {
	switch (action.type) {
		case 'INC':
			return { ...state, value: state.value + 1 };
		case 'DEC':
			return { ...state, value: state.value - 1 };
		case 'RND':
			return { ...state, value: state.value * action.payload };
		default:
			return state;
	}

	return 0;
};

export default reducer;
```

–ò –¥–∞–ª–µ–µ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º:
- –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∏—Ä—É–µ–º –∏ –¥–æ—Å—Ç–∞–Ω–µ–º –∏–∑ —Å—Ç–æ—Ä–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch`, `subscribe` –∏ `getState`
- –ò–≤–µ–Ω—Ç–ª–∏—Å—Ç–µ–Ω–µ—Ä—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –≤–ª–æ–∂–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é - –≤—ã–∑—ã–≤–∞—é—Ç —ç–∫—à–µ–Ω-—Ñ—É–Ω–∫—Ü–∏—é –≤–Ω—É—Ç—Ä–∏ `dispatch`. –≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é-–¥–∏—Å–ø—ç—Ç—á–µ—Ä (`incDispatch` –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ) 

`index.js`
```JS
import { createStore } from 'redux';
import reducer from './reducer';
import { dec, inc, rnd } from './actions';

const store = createStore(reducer);
const { dispatch, subscribe, getState } = store;

const updateCounter = () => {
	document.getElementById('counter').textContent = getState().value;
};

subscribe(updateCounter);

const incDispatch = () => dispatch(inc());
const decDispatch = () => dispatch(dec());
const rndDispatch = (value) => dispatch(rnd(value));

document.getElementById('inc').addEventListener('click', incDispatch);
document.getElementById('dec').addEventListener('click', decDispatch);
document.getElementById('rnd').addEventListener('click', () => {
	const value = Math.floor(Math.random() * 10);
	rndDispatch(value);
});
```

–û–¥–Ω–∞–∫–æ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é `bindActionCreator`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ —É–∂–µ —Å–±–∏–Ω–∂–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–∏—Å–ø—ç—Ç—á–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö

`index.js`
```JS
const store = createStore(reducer);
const { dispatch, subscribe, getState } = store;

const updateCounter = () => {
	document.getElementById('counter').textContent = getState().value;
};

subscribe(updateCounter);

const bindActionCreator =
	(creator, dispatch) =>
	(...args) =>
		dispatch(creator(...args));

const incDispatch = bindActionCreator(inc, dispatch);
const decDispatch = bindActionCreator(dec, dispatch);
const rndDispatch = bindActionCreator(rnd, dispatch);

document.getElementById('inc').addEventListener('click', incDispatch);
document.getElementById('dec').addEventListener('click', decDispatch);
document.getElementById('rnd').addEventListener('click', () => {
	const value = Math.floor(Math.random() * 10);
	rndDispatch(value);
});
```

–û–¥–Ω–∞–∫–æ –≤ —Ä–µ–¥–∞–∫—Å–µ —É–∂–µ –µ—Å—Ç—å –ø–æ–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `bindActionCreators`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞ –Ω–∞—Å —Å–æ–∑–¥–∞—ë—Ç –ø–æ–¥–æ–±–Ω—ã–π —Å–≤—è–∑—ã–≤–∞—Ç–µ–ª—å

`index.js`
```JS
import { createStore, bindActionCreators } from 'redux';

const incDispatch = bindActionCreators(inc, dispatch);
const decDispatch = bindActionCreators(dec, dispatch);
const rndDispatch = bindActionCreators(rnd, dispatch);
```

–¢–∞–∫ –∂–µ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é `bindActionCreators`, –Ω–æ —É–∂–µ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç

`index.js`
```JS
const { incDispatch, decDispatch, rndDispatch } = bindActionCreators(
	{
		incDispatch: inc,
		decDispatch: dec,
		rndDispatch: rnd,
	},
	dispatch,
);

document.getElementById('inc').addEventListener('click', incDispatch);
document.getElementById('dec').addEventListener('click', decDispatch);
document.getElementById('rnd').addEventListener('click', () => {
	const value = Math.floor(Math.random() * 10);
	rndDispatch(value);
});
```

–ú–æ–∂–Ω–æ –µ—â—ë —Å–∏–ª—å–Ω–µ–µ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å, –µ—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ –≤—Å–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª—ã–π –æ–±—ä–µ–∫—Ç –∏ –µ–≥–æ –≤–ª–æ–∂–∏—Ç—å –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º

`index.js`
```JS
// import { dec, inc, rnd } from './actions';
import * as actions from './actions';

const { inc, dec, rnd } = bindActionCreators(actions, dispatch);
```

![](_png/b9acfef5b2151f52493c0eb34a8d5b05.png)


## 005 –î–æ–±–∞–≤–∏–º React –≤ –ø—Ä–æ–µ–∫—Ç


–°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∞–∫—Ç-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç

`Counter.js`
```JS
import React from 'react';
import './counter.css';

const Counter = ({ counter, inc, dec, rnd }) => {
	const styles = {
		display: 'flex',
		justifyContent: 'center',
		alignItems: 'center',
		width: '99vh',
		height: '99vh',
	};

	return (
		<div style={styles}>
			<h1>{counter}</h1>
			<button className='btn' onClick={dec}>
				DEC
			</button>
			<button className='btn' onClick={inc}>
				INC
			</button>
			<button className='btn' onClick={rnd}>
				RND
			</button>
		</div>
	);
};

export default Counter;
```

–î–∞–ª–µ–µ –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –æ–±–µ—Ä–Ω—ë–º —Ä–µ–Ω–¥–µ—Ä —Ä–µ–∞–∫—Ç-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é `update`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `subscribe`, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä–µ–¥–∞–∫—Å–µ

*–¢—É—Ç –Ω—É–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö*

`index.js`
```JS
const store = createStore(reducer);
const { dispatch, subscribe, getState } = store;
const { inc, dec, rnd } = bindActionCreators(actions, dispatch);

const root = ReactDOM.createRoot(document.getElementById('root'));

const update = () => {
	root.render(
		<React.StrictMode>
			<Counter
				counter={getState().value}
				dec={dec}
				inc={inc}
				rnd={() => {
					const value = Math.floor(Math.random() * 10);
					rnd(value);
				}}
			/>
		</React.StrictMode>,
	);
};

update();

subscribe(update);
```

–ò —Å—á—ë—Ç—á–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

![](_png/4ef67f94a2507255d233c45059677af9.png)

–ò —Å–µ–π—á–∞—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å —Ä–µ–¥–∞–∫—Å–æ–º:

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç—ã —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —ç–∫—à–µ–Ω–æ–≤. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ - —ç—Ç–æ —Å–æ–∑–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ `createStore` –∏ –∑–∞–∫–∏–Ω—É—Ç—å –≤ –Ω–µ–≥–æ `reducer`. –î–∞–ª–µ–µ –Ω–∞–º –Ω—É–∂–Ω–æ –≤–ª–æ–∂–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `Provider`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–æ—Ä–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –í –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –±—É–¥–µ—Ç –∏ —Å–∞–º `store`

–¢—É—Ç –Ω—É–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–∞–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–∞–º —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

`index.js`
```JS
import React from 'react';
import ReactDOM from 'react-dom/client';

import { createStore, bindActionCreators } from 'redux';
import { Provider } from 'react-redux';

import reducer from './reducer';
import App from './components/App';
import './index.css';

// –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
const store = createStore(reducer);

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
	<React.StrictMode>
		<Provider store={store}>
			<App />
		</Provider>
	</React.StrictMode>,
);
```

–ò –¥–∞–ª–µ–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ `App`

`components > App.js`
```JS
import React from 'react';
import Counter from './Counter';

const App = () => {
	return <Counter />;
};

export default App;
```

> –î–∞–ª–µ–µ, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å –ø–æ–º–æ—â—å—é `connect` —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ–∫–∏–Ω—É—Ç—å –≤ `Counter` –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—á—ë—Ç—á–∏–∫–æ–º. –ü–æ–∫–∞ –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π.


## 006 –°–æ–µ–¥–∏–Ω—è–µ–º React –∏ Redux –ø—Ä–∏ –ø–æ–º–æ—â–∏ connect


–ü–æ–¥–∫–ª—é—á–∏—Ç—å Redux –∫ React –º–æ–∂–Ω–æ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
- —Ñ—É–Ω–∫—Ü–∏—è `connect`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–ª–∞—Å—Å–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏ –≤ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö 
- —Ö—É–∫ `useSelector`

[–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏](https://www.samdawson.dev/article/react-redux-use-selector-vs-connect) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–∞:
- –º–µ–Ω—å—à–µ –±–æ–π–ª–µ—Ä–ø–ª–µ–π—Ç–∞
- —Å–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, —á–µ–º –æ–±—ã—á–Ω—ã–π –∫–æ–Ω–Ω–µ–∫—Ç
- –ø—Ä–æ—â–µ –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏
- –º–æ–∂–µ—Ç –±—ã—Ç—å –±–∞–≥ —Å [**"–ó–æ–º–±–∏ –¥–µ—Ç—å–º–∏"**](https://vadim-budarin.medium.com/react-%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D0%BE-%D0%BE-zombie-children-and-stale-props-d31247ea08)
- –±–æ–ª–µ–µ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –≤ –ø–ª–∞–Ω–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞, –Ω–æ –º–µ–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π

–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –Ω–∞—à–µ–º –∫–∞—É–Ω—Ç–µ—Ä–µ

–î–ª—è –Ω–∞—á–∞–ª–∞, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ `actionCreator`-—Ñ—É–Ω–∫—Ü–∏—é 

`actions.js`
```JS
export const inc = () => ({ type: 'INC' });
export const dec = () => ({ type: 'DEC' });
export const rnd = () => ({ type: 'RND', payload: Math.floor(Math.random() * 10) });
```

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º, –Ω—É–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤—ã–≤–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é `connect`, –ø–æ–ª—É—á–∞–µ–º—É—é –∏–∑ —Ä–µ–∞–∫—Ç-—Ä–µ–¥–∞–∫—Å–∞. –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –≤–æ –≤—Ç–æ—Ä—ã–µ —Å–∫–æ–±–æ—á–∫–∏ (–∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–µ—Ç—ë—Ä–Ω–∞). –í –ø–µ—Ä–≤—ã–µ —Å–∫–æ–±–∫–∏ —É–∂–µ –±—É–¥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å–∞–º–æ–≥–æ –∫–æ–Ω–Ω–µ–∫—Ç–∞

–†–∞–±–æ—Ç–∞–µ—Ç `connect` –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Ü–µ–ø–æ—á–∫–µ:
- –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–¥–∏—Å–ø–µ—Ç—á–∏–ª (–∏–∑–º–µ–Ω–∏–ª —Å—Ç–µ–π—Ç) –∫–∞–∫–æ–µ-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏–µ
-  –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- –ø—Ä–æ–≤–∞–π–¥–µ—Ä –æ—Ç–ª–∞–≤–ª–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ –¥–∞—ë—Ç —Å–∏–≥–Ω–∞–ª –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏
- –¥–∞–ª—å—à–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `connect` –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `mapStateToProps`
- –∏ –µ—Å–ª–∏ –ø—Ä–æ–ø—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–æ–º–µ–Ω—è–ª–∏—Å—å, —Ç–æ –≤–µ—Å—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–Ω

–ò –¥–∞–ª–µ–µ —Å–æ–∑–¥–∞–¥–∏–º –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ `mapStateToProps` –∏ `mapDispatchToProps`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å:
- –∏–∑ –ø–µ—Ä–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å—Ç–æ—Ä–∞
- —Å –ø–æ–º–æ—â—å—é –≤—Ç–æ—Ä–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏-–¥–∏—Å–ø—ç—Ç—á–∞

`Counter.js`
```JS
import React from 'react';
import './counter.css';
import { connect } from 'react-redux';
import * as actions from '../actions';
import { bindActionCreators } from 'redux';

const Counter = ({ counter, inc, dec, rnd }) => {
	return (
		<div className='wrapper'>
			<h1>{counter}</h1>
			<button className='btn' onClick={dec}>
				DEC
			</button>
			<button className='btn' onClick={inc}>
				INC
			</button>
			<button className='btn' onClick={rnd}>
				RND
			</button>
		</div>
	);
};

// —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø—Ä–æ–ø—Å—ã –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ –Ω–µ–≥–æ
// –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å–∞–Ω –≤ index.js
const mapStateToProps = (state) => {
	// –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≤—ã—Ç–∞—â–∏—Ç—å –∏–∑ —Å—Ç–µ–π—Ç–∞
	return { counter: state.value };
};

// –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥–∞—ë—Ç –≤–Ω—É—Ç—Ä—å –∫–æ–Ω–Ω–µ–∫—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–¥–∏—Å–ø–µ—Ç—á–∏
const mapDispatchToProps = (dispatch) => {
	return bindActionCreators(actions, dispatch);
};

export default connect(mapStateToProps, mapDispatchToProps)(Counter);
```

–§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–Ω–µ–∫—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è 4 –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è:
- `mapStateToProps` –≤ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—Ä–æ—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–µ–π—Ç–∞
- `mapDispatchToProps` –≤ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç —Å –¥–∏—Å–ø–µ—Ç—á–∞–º–∏ –∏–ª–∏ –≤ –≤–∏–¥–µ –æ–±—ä–µ–∫—Ç–∞ (–∫–æ–Ω–Ω–µ–∫—Ç —Å–∞–º —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç –æ–±—ä–µ–∫—Ç –∏ —Å–¥–µ–ª–∞–µ—Ç –∏–∑ –Ω–µ–≥–æ –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- `mergeProps` –∏ `options` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ `connect`

```JS
function connect(mapStateToProps?, mapDispatchToProps?, mergeProps?, options?)
```

–§—É–Ω–∫—Ü–∏—è `mapStateToProps` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–µ–π—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å—Ç–æ–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π, –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è-—Ä–µ–¥—å—é—Å–µ—Ä

–¢–æ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

![](_png/1fa07a3b516072f4ab32e05d0707024d.png)

–§—É–Ω–∫—Ü–∏—è `mapDispatchToProps` —É–∂–µ –∏–º–µ–µ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–µ–±–µ –Ω—É–∂–Ω—ã–µ –¥–∏—Å–ø—ç—Ç—á–∏ –ø–æ–¥ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–¢—É—Ç —Ç–∞–∫ –∂–µ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–µ–ø–µ–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ (–ø–µ—Ä–≤—ã–µ —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å —É—á—ë—Ç–æ–º –Ω–µ–∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ `actionCreator`–∞):

```JS
import { inc, dec, rnd } from '../actions';

// –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥–∞—ë—Ç –≤–Ω—É—Ç—Ä—å –∫–æ–Ω–Ω–µ–∫—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–¥–∏—Å–ø–µ—Ç—á–∏
const mapDispatchToProps = (dispatch) => {
	return {
		inc: () => dispatch(inc()),
		dec: () => dispatch(dec()),
		rnd: () => {
			const value = Math.floor(Math.random() * 10);
			dispatch(rnd(value));
		},
	};
};

/// –ò–õ–ò ...

import * as actions from '../actions';
import { bindActionCreators } from 'redux';

const mapDispatchToProps = (dispatch) => {
	const { inc, dec, rnd } = bindActionCreators(actions, dispatch);

	return {
		inc,
		dec,
		rnd: () => {
			const value = Math.floor(Math.random() * 10);
			rnd(value);
		},
	};
};

/// –ò–õ–ò ...
import * as actions from '../actions';
import { bindActionCreators } from 'redux';

const mapDispatchToProps = (dispatch) => {
	const { inc, dec, rnd } = bindActionCreators(actions, dispatch);

	return {
		inc,
		dec,
		rnd,
	};
};

/// –ò–õ–ò...
const mapDispatchToProps = (dispatch) => {
	return bindActionCreators(actions, dispatch);
};
```

–û–¥–Ω–∞–∫–æ –¥–∞–ª—å—à–µ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `connect` –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—é, –≥–¥–µ –º—ã —Å–∞–º–∏ —Ä–∞–∑–±–∏–≤–∞–µ–º `actionCreator'—ã`, –∞ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–Ω–µ–∫—Ç–∞ —Å–∞–º–∞ —Ä–∞–∑–±–µ—Ä—ë—Ç

–û–¥–Ω–∞–∫–æ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –Ω–∞–¥ `actionCreator`–∞–º–∏

`Counter.js`
```JS
import * as actions from '../actions';

export default connect(mapStateToProps, actions)(Counter);
```

–ò—Ç–æ–≥: –∫–∞—É–Ω—Ç–µ—Ä –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

![](_png/e12d92fafa10e54a1c58754f22f60dbf.png)

–ù—É –∏ —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ñ—É–Ω–∫—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–ª–∞—Å—Å–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

![](_png/a49dd5e847f7e232cf59e1b30cf9b0ed.png)


## 007 –°–æ–µ–¥–∏–Ω—è–µ–º React –∏ Redux –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ö—É–∫–æ–≤


–¢–∞–∫ –∂–µ –∫—É–¥–∞ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º —Å–ø–æ—Å–æ–±–æ–º –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Å–∞ –∫ —Ä–µ–∞–∫—Ç—É –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤:
- `useSelector` - –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (—Å—Ç–æ—Ä–∞) –Ω—É–∂–Ω–æ–µ –Ω–∞–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ 
- `useDispatch` - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch`

`Counter.js`
```JS
import { useDispatch, useSelector } from 'react-redux';
import { inc, dec, rnd } from '../actions';

const Counter = () => {
	// —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ —Å—Ç–æ—Ä–∞
	const { counter } = useSelector((state) => state);

	// —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–π-–¥–∏—Å–ø—ç—Ç—á–µ–π
	const dispatch = useDispatch();

	return (
		<div className='wrapper'>
			<h1>{counter}</h1>
			<button className='btn' onClick={() => dispatch(dec())}>
				DEC
			</button>
			<button className='btn' onClick={() => dispatch(inc())}>
				INC
			</button>
			<button className='btn' onClick={() => dispatch(rnd())}>
				RND
			</button>
		</div>
	);
};

export default Counter;
```

![](_png/9f466fd78259bd9344abe48b067f1da6.png)

–û—Ç–ª–∏—á–∏—è `useSelector` –æ—Ç `mapStateToProps`:
- —Ö—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å—ë, —á—Ç–æ —É–≥–æ–¥–Ω–æ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –∏–¥—ë—Ç –Ω–∞ –ø—Ä–æ–ø—Å—ã
- –∫–æ–ª–ª—é—ç–∫ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë, —á—Ç–æ —É–≥–æ–¥–Ω–æ —Å –¥–∞–Ω–Ω—ã–º–∏, –Ω–æ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —á–∏—Å—Ç–æ–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π
- –≤ —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –º–æ–∂–µ—Ç –ø–æ–º–µ—â–∞—Ç—å—Å—è —á—Ç–æ —É–≥–æ–¥–Ω–æ (—Å—Ç—Ä–æ–∫–∞, –º–∞—Å—Å–∏–≤, —Ñ—É–Ω–∫—Ü–∏—è –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ)
- –≤ —Ö—É–∫–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ `ownProp`, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–ø—Å–æ–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –¥–∏—Å–ø—ç—Ç—á-—Ñ—É–Ω–∫—Ü–∏–∏, —Ö—É–∫ —Å–∞–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç. –¢—É—Ç —É–∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–µ –ø–æ –≤—Å–µ–º—É –æ–±—ä–µ–∫—Ç—É, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –ø–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø–æ–ª—è–º –æ–±—ä–µ–∫—Ç–∞ (–µ—Å–ª–∏ –º—ã —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç, –Ω–æ –µ—Å–ª–∏ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —á–µ—Ä–µ–∑ `return`, —Ç–æ —Ç—É—Ç —É–∂–µ –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –≤—Å–µ–º—É –æ–±—ä–µ–∫—Ç—É)
- –¢–∞–∫ –∂–µ —Ö—É–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–µ–π—Ç–∞ –≤ —Å—Ç–æ—Ä–µ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–¢–∞–∫ –∂–µ, –∫–æ–≥–¥–∞ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, —Ç–æ —É –Ω–∞—Å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ß—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –¥–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–∏, –º–æ–∂–Ω–æ:
- –ø—Ä–æ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–∞ `useSelector` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –∏–∑ —Å—Ç–æ—Ä–∞
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é [Reselect](https://react-redux.js.org/api/hooks) –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```JS
import React from 'react'
import { useSelector } from 'react-redux'
import { createSelector } from 'reselect'

const selectNumCompletedTodos = createSelector(
  (state) => state.todos,
  (todos) => todos.filter((todo) => todo.completed).length
)

export const CompletedTodosCounter = () => {
  const numCompletedTodos = useSelector(selectNumCompletedTodos)
  return <div>{numCompletedTodos}</div>
}

export const App = () => {
  return (
    <>
      <span>Number of completed todos:</span>
      <CompletedTodosCounter />
    </>
  )
}
```
- –ª–∏–±–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `shallowEqual`:
```JS
import { shallowEqual, useSelector } from 'react-redux'

// later
const selectedData = useSelector(selectorReturningObject, shallowEqual)
```

–ï—Å–ª–∏ –º—ã –≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ —Ö—É–∫ `useDispatch`, —Ç–æ —Ç—É—Ç –Ω—É–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –µ–≥–æ –¥–∞–ª—å—à–µ –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –≤ –Ω–∏–∂–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω—É–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ `useCallback`, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞–ª—Å—è –¥–∏—Å–ø—ç—Ç—á. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å–ø—ç—Ç—á–∞ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–∞–º–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

```JS
const incrementCounter = useCallback(
	() => dispatch({ type: 'increment-counter' }),
	[dispatch]
)
```

–¢–∞–∫ –∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö—É–∫ `useStore`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–µ—Å—å –æ–±—ä–µ–∫—Ç —Å—Ç–æ—Ä–∞, –Ω–æ –∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ —Å—Ç–æ–∏—Ç

```JS
import React from 'react'
import { useStore } from 'react-redux'

export const CounterComponent = ({ value }) => {
  const store = useStore()

  // –¢–û–õ–¨–ö–û –ü–†–ò–ú–ï–†! –¢–∞–∫–æ–µ –¥–µ–ª–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ω–µ–ª—å–∑—è
  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—ë–Ω, –µ—Å–ª–∏ —Å—Ç–æ—Ä –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—ë–Ω
  return <div>{store.getState()}</div>
}
```

>[!info] –í –∫–æ–Ω—Ü–µ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å —Ö—É–∫–∞–º–∏ - —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –∫–æ–Ω–µ—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. –ù–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å —Ö—É–∫–∏ —Ä–µ–¥–∞–∫—Å–∞ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö—É–∫–∏.

## Zombie Childrens

-   **zombie children**: –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –æ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–æ–¥–∏—Ç–µ–ª—å –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç
-   **stale props**: –ø—Ä–æ—Ç—É—Ö—à–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ - —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –≤ –¥–∞–Ω–Ω—ã–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–∞–∂–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–µ–±–µ —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ –∏ –∫–æ–≥–¥–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å.

**zombie children** ‚Äî –¥–∞–≤–Ω—è—è –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–ø—ã—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`react-redux`) —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ **React**.

> –ü—Ä–æ–±–ª–µ–º–∞ –∫—Ä–æ–µ—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è `ComponentDidMount`/`useEffect` —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ **React** –ø—Ä–∏ –∏—Ö –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ –¥–µ—Ä–µ–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –∏–µ—Ä–∞—Ä—Ö–∏—è—Ö —Ä–æ–¥–∏—Ç–µ–ª—å-–¥–µ—Ç–∏, –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —ç—Ç–∞ —Å–≤—è–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Ç–∏–ø–∞ ‚Äú—Å–ø–∏—Å–æ–∫‚Äù –∏–ª–∏ ‚Äú–¥–µ—Ä–µ–≤–æ‚Äù –∏ —ç—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ **React**.

–î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∏–ø–∏—á–Ω—ã–π PubSub –æ–±—ä–µ–∫—Ç

```JS
function createStore(reducer) {  
    var state;  
    var listeners = [];  
  
    function getState() {  
        return state;  
    }  
      
    function subscribe(listener) {  
        listeners.push(listener)  
        return function unsubscribe() {  
            var index = listeners.indexOf(listener);  
            listeners.splice(index, 1);  
        }  
    }  
      
    function dispatch(action) {  
        state = reducer(state, action);  
        listeners.forEach(listener => listener(state));  
    }  
  
    dispatch({});  
  
    return { dispatch, subscribe, getState };  
}
```

–ì–ª—è–¥—è –Ω–∞ listeners –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–Ω–∏–º–∞—Ç—å –æ–¥–Ω–æ: —Ç–∞–∫ –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å ‚Äî¬†**–∫–æ–ª–ª–±—ç–∫–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Ä–æ–≤–Ω–æ –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏.**

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–æ–¥–∏—Ç–µ–ª—å-–¥–µ—Ç–∏:

```JSX
<A>  
    <B />  
    <C />  
</A>
```

–ï—Å–ª–∏ –∫–∞–∂–¥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –≤ ComponentDidMount –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –∫–æ–Ω—Å–æ–ª—å –∏–º–µ–Ω–∏ –º–æ–Ω—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —Ç–æ –º—ã —É–≤–∏–¥–∏–º —Å–ª–µ–¥—É—é—â–µ–µ:

mounting component B  
mounting component C  
mounting component A

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ**: —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ê –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π (–µ–≥–æ –º–µ—Ç–æ–¥ ComponentDidMount –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º)!

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è redux –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```JS
state = {  
  list: [  
    1: { id: 1, title: 'Component1', text: '...' },  
    2: { id: 2, title: 'Component2', text: '...' }  
  }  
};  
  
const List = ({ list }) => {  
  return list.map(item =>   
      <ListItemContainer id={item.id} title={item.title} />);  
}  
  
const ListContainer = connect()(List);
```

–ï—Å–ª–∏ –≤ –∫–∞–∂–¥–æ–º –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –≤ –º–µ—Ç–æ–¥–µ ComponentDidMount –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥–ø–∏—Å–∫–∞ subscribe –Ω–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö —Å–Ω–∞—á–∞–ª–∞ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã –∫–æ–ª–ª–±–µ–∫–∏ —É –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –ª–∏—à—å –∑–∞—Ç–µ–º ‚Äî —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞-—Ä–æ–¥–∏—Ç–µ–ª—è.

–¢–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö –º—ã —É–¥–∞–ª–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ:

`1: { id: 1, title: 'Component1', text: '...' },`

–ü–µ—Ä–≤—ã–º –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –∫–æ–ª–ª–±—ç–∫ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ListItemContainer —Å id=1 (—Ç–∞–∫ –∫–∞–∫ –æ–Ω –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–≤—ã–º –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è –∏ –ø–µ—Ä–≤—ã–º –ø–æ–¥–ø–∏—Å–∞–ª—Å—è), –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–π–¥–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏, –∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–º –¥–ª—è –Ω–µ–≥–æ —É–∂–µ –Ω–µ—Ç!  
–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –ø—É—Ç–µ–º –æ–±—Ä–∞—â–µ–Ω–∏—è

`const { someProp } = store.list[1];`

–ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∫—Ä–∞—Ö—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ—à–∏–±–∫–æ–π —Ç–∏–ø–∞¬†_‚ÄúUncaught TypeError: Cannot read property ‚Äò1‚Äô of undefined.‚Äù_¬†–∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–π (–æ—à–∏–±–∫–∏ –º–æ–∂–µ—Ç –∏ –Ω–µ –±—ã—Ç—å –µ—Å–ª–∏ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç –≤ —Å—Ç–æ—Ä–µ, –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –¥–µ—Ä–µ–≤–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏ –æ–Ω ‚Äî –∑–æ–º–±–∏);

–û–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å `id=1` –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–º –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `ListContainer`, —Ö–æ—Ç—è –Ω–∞ –º–æ–º–µ–Ω—Ç –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–µ—Ä–µ–≤–µ DOM‚Äî¬†**–∑–æ–º–±–∏-—Ä–µ–±–µ–Ω–æ–∫**

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è —ç—Ç–∏ –±—Ä–æ—à–µ–Ω–Ω—ã–µ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –≤ –¥–µ—Ä–µ–≤–µ –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—è.

–° **zombie children** —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å. –¢–µ–ø–µ—Ä—å –ø–æ—Ä–∞ –≤—ã—è—Å–Ω–∏—Ç—å —á—Ç–æ —Ç–∞–∫–æ–µ stale props.

–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–∏–º–µ—Ä: –¥–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º —á—Ç–æ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å `id=1` –º—ã –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–º–µ–Ω—è–ª–∏ `title`. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?

–°—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–ª–ª–±—ç–∫ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ListContainer` —Å `id=1`, –æ–Ω –Ω–∞—á–Ω–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç title, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –µ–º—É –ø–µ—Ä–µ–¥–∞–Ω –≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º ListContainer, –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–∞–Ω–Ω—ã—Ö ‚Äî `title` –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —è–≤–ª—è–µ—Ç—Å—è¬†**stale props**!

–ü–æ—á–µ–º—É –∂–µ –º–Ω–æ–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —ç—Ç–æ–≥–æ –Ω–µ –∑–Ω–∞—é—Ç? –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç –Ω–∏—Ö —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞—é—Ç!! üòä

–ö –ø—Ä–∏–º–µ—Ä—É, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ react-redux –ø–æ—Å—Ç—É–ø–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º ‚Äî –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `try‚Ä¶catch`, –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ ‚Äî –æ–Ω–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Å—á–µ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –≤ 1 –∏ –≤—ã–∑—ã–≤–∞—é—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É —Ä–æ–¥–∏—Ç–µ–ª—è. –ï—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–Ω–æ–≤–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ –∏ —Å—á–µ—Ç—á–∏–∫ `> 0` ‚Äî –∑–Ω–∞—á–∏—Ç —ç—Ç–æ –Ω–µ **zombie children**, –∞ —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ —Å–µ—Ä—å–µ–∑–Ω–æ–µ, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –ø—Ä–æ–∫–∏–¥—ã–≤–∞—é—Ç —ç—Ç—É –æ—à–∏–±–∫—É –Ω–∞—Ä—É–∂—É. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä–∏–ª–∞—Å—å ‚Äî —ç—Ç–æ –±—ã–ª –∑–æ–º–±–∏-—Ä–µ–±–µ–Ω–æ–∫ –∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—è –æ–Ω –ø—Ä–æ–ø–∞–¥–µ—Ç.  
–ï—Å—Ç—å –∏ –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –∏–∑–º–µ–Ω—è—é—Ç –ø–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –ø–æ–¥–ø–∏—Å—ã–≤–∞–ª—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–Ω—å—à–µ —á–µ–º –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

–ù–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–∞–∂–µ —Ç–∞–∫–∏–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–ø–∞—Å–∞—é—Ç ‚Äî –≤ react-redux –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç, —á—Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏—Ö —Ö—É–∫–æ–≤ –≤—Å–µ –∂–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å¬†[zombie children & stale props](https://react-redux.js.org/7.1/api/hooks#stale-props-and-zombie-children), —Ç.–∫. —É –Ω–∏—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è —Å—Ç–æ—Ä–∞ –≤ —Ö—É–∫–µ useEffect (—á—Ç–æ —Ä–∞–≤–Ω–æ–∑–Ω–∞—á–Ω–æ componentDidMount), –Ω–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç HOC–∞ connect - –Ω–µ –∫–æ–º—É –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏.

> –ü—Ä–∏–º–µ—Ä —Å [zombie children](https://codesandbox.io/s/42164qln37?file=/src/index.js)

–í–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–µ—Ç—É—é—Ç:

-   –ù–µ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
-   –í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ ‚Äî –ø—ã—Ç–∞–π—Ç–µ—Å—å –≤—ã–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ: –≤–º–µ—Å—Ç–æ¬†`state.todos[props.id].name`¬†–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ¬†`todo = state.todos[props.id`¬†–¥–ª—è –Ω–∞—á–∞–ª–∞ –∏ –∑–∞—Ç–µ–º –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ¬†`todo`¬†–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ¬†`todo.name`
-   —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è `stale props `‚Äî –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –≤ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤—ã–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ ‚Äî –≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç —Å–≤–µ–∂–∏–º–∏

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–≤–æ–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **React**, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ–± –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ `ComponentDidMount` —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –¥–µ—Ç–µ–π –≤ —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ **React**, —á—Ç–æ–±—ã –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∏ –æ—à–∏–±–∫–∏ –¥–∞–Ω–Ω–æ–≥–æ —Ä–æ–¥–∞.

–ù–æ –ª—É—á—à–∏–π —Å–æ–≤–µ—Ç ‚Äî —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è **React** –≤ —Ö—É–∫–µ `useState` –∏–ª–∏ –≤ `Context /useContext`‚Äî –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Ç.–∫. –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –≤—ã–∑–æ–≤ —ç—Ç–∏—Ö —Ö—É–∫–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ ‚Äî —Å–Ω–∞—á–∞–ª–∞ —É —Ä–æ–¥–∏—Ç–µ–ª—è, –∞ –∑–∞—Ç–µ–º ‚Äî —É –¥–µ—Ç–µ–π.


## 008 Redux devtools


–ö–æ–≥–¥–∞ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å–æ —Å—Ç–∞—Ä—ã–º –ê–ü–ò —Ä–µ–¥–∞–∫—Å–∞, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –¥–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ç—É–ª–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–µ—Å–ª–∏ –ø–∏—à–µ–º –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º, —Ç–æ –æ–±–æ–π—Ç–∏—Å—å –º–æ–∂–Ω–æ –∏ –±–µ–∑ —ç—Ç–æ–≥–æ)

```js
// –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());
```

–ò –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—ã–≥–ª—è–¥–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç—É–ª–∑–∞:

![](_png/2029fddbffb28a37ee77473d1a4c2e0b.png)

–¢–∞–∫ –∂–µ –º—ã –º–æ–∂–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–∞–∑–Ω—ã—Ö —Å—Ç–µ–π—Ç–æ–≤ –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∞

![](_png/038256c970e464687d2c997d82ea0926.png)

–ò —Å–∞–º–∞—è —á–∞—Å—Ç–æ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤–∫–ª–∞–¥–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

![](_png/c10c857e10d8e2be48d6f0501a5e1933.png)

–ù—É –∏ —Ç–∞–∫ –∂–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —ç–∫—à–µ–Ω–æ–≤

![](_png/8ff7895c61675e0ad8f7eba639b1c0fa.png)

–¢–∞–∫ –∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–π–º–ª–∞–π–Ω –¥–ª—è –æ—Ç–º–æ—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

![](_png/347146178c93902506e46137a4e919b2.png)


## 009 –ü—Ä–∞–≤–∏–ª–æ –Ω–∞–∑–≤–∞–Ω–∏—è action –∏ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ (–º–∏–Ω–∏-—ç–∫–∑–∞–º–µ–Ω)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

![](_png/d4e9df8b69d9cd80c2ca386c1dd13506.png)

–≠—Ç–æ —Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —à—ç—Ä–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ `json-server` –∏ –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã

`heroses.json`
```JSON
{
    "heroes": [
        {
            "id": 1,
            "name": "–ü–µ—Ä–≤—ã–π –≥–µ—Ä–æ–π",
            "description": "–ü–µ—Ä–≤—ã–π –≥–µ—Ä–æ–π –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ!",
            "element": "fire"
        },
        {
            "id": 2,
            "name": "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–µ—Ä–æ–π",
            "description": "–°–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –≤ —Ç–µ–Ω–∏",
            "element": "wind"
        },
        {
            "id": 3,
            "name": "–ú–æ—Ä—Å–∫–æ–π –≥–µ—Ä–æ–π",
            "description": "–ö–∞–∫ –∞–∫–≤–∞–º–µ–Ω, –Ω–æ –Ω–µ –∏–∑ DC",
            "element": "water"
        }
    ],
    "filters": [
        "all",
        "fire",
        "water",
        "wind",
        "earth"
    ]
}
```

–°—Ç–æ—Ä —Ä–µ–¥–∞–∫—Å–∞

`src > store > index.js`
```JS
import { createStore } from 'redux';
import reducer from '../reducers';

const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());

export default store;
```

–†–µ–¥—å—é—Å–µ—Ä —Ä–µ–¥–∞–∫—Å–∞. –ü–æ–∫–∞ –æ–Ω –æ–¥–∏–Ω, –Ω–æ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.

–í—Å–µ —Ç–∏–ø—ã —ç–∫—à–µ–Ω–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω—ã –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏. –ï—Å–ª–∏ –æ–Ω–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –∑–∞–ø—Ä–æ—Å–∞–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —Ç–æ –º—ã –∏–º–µ–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏.

–í—Ç–æ—Ä–æ–π –∫–µ–π—Å —Ä–µ–¥—å—é—Å–µ—Ä–∞ —Ç–∞–∫ –∂–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ `payload` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è —Å–ø–∏—Å–æ–∫ –≥–µ—Ä–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

`src > reducer > index.js`
```JS
const initialState = {
    heroes: [], // –≥–µ—Ä–æ–∏
    heroesLoadingStatus: 'idle', // –Ω–∞—á–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏
    filters: [] // —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
}

const reducer = (state = initialState, action) => {
    switch (action.type) {
        case 'HEROES_FETCHING':
            return {
                ...state,
                heroesLoadingStatus: 'loading'
            }
        case 'HEROES_FETCHED':
            return {
                ...state,
                heroes: action.payload,
                heroesLoadingStatus: 'idle'
            }
        case 'HEROES_FETCHING_ERROR':
            return {
                ...state,
                heroesLoadingStatus: 'error'
            }
        default: return state
    }
}

export default reducer;
```

–ê —É–∂–µ —Ç—É—Ç –æ–ø–∏—Å–∞–Ω—ã —ç–∫—à–µ–Ω—ã —Ä–µ–¥–∞–∫—Å–∞.

–≠–∫—à–µ–Ω `heroesFetched` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è —Ç–∞–∫ –∂–µ —Å–ø–∏—Å–æ–∫ –≥–µ—Ä–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—à—ë–ª –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

`src > actions > index.js`
```JS
export const heroesFetching = () => {
    return {
        type: 'HEROES_FETCHING'
    }
}

export const heroesFetched = (heroes) => {
    return {
        type: 'HEROES_FETCHED',
        payload: heroes
    }
}

export const heroesFetchingError = () => {
    return {
        type: 'HEROES_FETCHING_ERROR'
    }
}
```

–•—É–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

`src > hooks > http.hook.js`
```JS
import { useCallback } from "react";

export const useHttp = () => {
    // const [process, setProcess] = useState('waiting');

    const request = useCallback(async (url, method = 'GET', body = null, headers = {'Content-Type': 'application/json'}) => {

        // setProcess('loading');

        try {
            const response = await fetch(url, {method, body, headers});

            if (!response.ok) {
                throw new Error(`Could not fetch ${url}, status: ${response.status}`);
            }

            const data = await response.json();

            return data;
        } catch(e) {
            // setProcess('error');
            throw e;
        }
    }, []);

    // const clearError = useCallback(() => {
        // setProcess('loading');
    // }, []);

    return {
	    request, 
		// clearError, 
		// process, 
		// setProcess
    }
}
```

–¢—É—Ç —É–∂–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

`src > index.js`
```JS
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';

import App from './components/app/App';
import store from './store';

import './styles/index.scss';

ReactDOM.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>,
  document.getElementById('root')
);
```

–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `App`

`src > components > app > App.js`
```JS
import HeroesList from '../heroesList/HeroesList';
import HeroesAddForm from '../heroesAddForm/HeroesAddForm';
import HeroesFilters from '../heroesFilters/HeroesFilters';

import './app.scss';

const App = () => {
    
    return (
        <main className="app">
            <div className="content">
                <HeroesList/>
                <div className="content__interactive">
                    <HeroesAddForm/>
                    <HeroesFilters/>
                </div>
            </div>
        </main>
    )
}

export default App;
```

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤–º–µ—Å—Ç–µ (react –∏ json-server), –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ: 

```bash
npm i concurrently
```

–ò —Ç–∞–∫ —Ç–µ–ø–µ—Ä—å –≤—ã–≥–ª—è–¥–∏—Ç —Å–¥–≤–æ–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:

`package.json`
```JSON
"start": "concurrently \"react-scripts start\" \"npx json-server heroes.json --port 3001\"",
```

–≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ –≥–µ—Ä–æ–µ–≤

`components > heroesList > HeroesList.js`
```JS
import { useHttp } from '../../hooks/http.hook';
import { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';

import { heroesFetching, heroesFetched, heroesFetchingError } from '../../actions';
import HeroesListItem from '../heroesListItem/HeroesListItem';
import Spinner from '../spinner/Spinner';

// —Å–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
const HeroesList = () => {
	// –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø–æ–ª—É—á–∞–µ–º –≥–µ—Ä–æ–µ–≤ –∏ —Å—Ç–∞—Ç—É—Å –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏
	const { heroes, heroesLoadingStatus } = useSelector((state) => state);
	const dispatch = useDispatch(); // –ø–æ–ª—É—á–∞–µ–º –¥–∏—Å–ø–µ—Ç—á
	const { request } = useHttp(); // –ø–æ–ª—É—á–∞–µ–º —Ö—É–∫ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

	// –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
	useEffect(() => {
		// —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∑–∞–≥—Ä—É–∑–∫—É
		dispatch(heroesFetching());

		// –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
		request('http://localhost:3001/heroes')
			.then((data) => dispatch(heroesFetched(data))) // –≥–µ—Ä–æ–∏ –ø–æ–ª—É—á–µ–Ω—ã
			.catch(() => dispatch(heroesFetchingError())); // –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É —Å —Å–µ—Ä–≤–µ—Ä–∞
	}, []);

    // –µ—Å–ª–∏ –≥–µ—Ä–æ–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
	if (heroesLoadingStatus === 'loading') {
		// —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        return <Spinner />; 
        
        // –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ 
	} else if (heroesLoadingStatus === 'error') {
        // —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É
		return <h5 className='text-center mt-5'>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>;
	}

    // —Ä–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –≥–µ—Ä–æ–µ–≤
	const renderHeroesList = (arr) => {
		if (arr.length === 0) {
			return <h5 className='text-center mt-5'>–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>;
		}

		return arr.map(({ id, ...props }) => {
			return <HeroesListItem key={id} {...props} />;
		});
	};

    // —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –≥–µ—Ä–æ–µ–≤
	const elements = renderHeroesList(heroes);
	
    // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –≥–µ—Ä–æ–µ–≤
    return <ul>{elements}</ul>;
};

export default HeroesList;
```

–ê —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∞–º–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏

`components > heroesListItem > HeroesListItem.js`
```JS
const HeroesListItem = ({name, description, element}) => {
    // —Ç—É—Ç –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø–∞–¥—ë—Ç –≤ –∞–π—Ç–µ–º
    let elementClassName;

    // —Ç—É—Ç –º—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∫–ª–∞—Å—Å –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
    switch (element) {
        case 'fire':
            elementClassName = 'bg-danger bg-gradient';
            break;
        case 'water':
            elementClassName = 'bg-primary bg-gradient';
            break;
        case 'wind':
            elementClassName = 'bg-success bg-gradient';
            break;
        case 'earth':
            elementClassName = 'bg-secondary bg-gradient';
            break;
        default:
            elementClassName = 'bg-warning bg-gradient';
    }

    return (
        <li 
            className={`card flex-row mb-4 shadow-lg text-white ${elementClassName}``}>
            <img src="http://www.stpaulsteinbach.org/wp-content/uploads/2014/09/unknown-hero.jpg" 
                 className="img-fluid w-25 d-inline" 
                 alt="unknown hero" 
                 style={{'objectFit': 'cover'}}/>
            <div className="card-body">
                
                <h3 className="card-title">{name}</h3>
                <p className="card-text">{description}</p>
            </div>
            <span className="position-absolute top-0 start-100 translate-middle badge border rounded-pill bg-light">
                <button type="button" className="btn-close btn-close" aria-label="Close"></button>
            </span>
        </li>
    )
}

export default HeroesListItem;
```

–¢—É—Ç —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—ë—Ä—Å—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–º–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –∫–ª–∞—Å—Å–æ–≤: 

`components > heroesFilters > HeroesFilters.js`
```JS
const HeroesFilters = () => {
    return (
        <div className="card shadow-lg mt-4">
            <div className="card-body">
                <p className="card-text">–û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –≥–µ—Ä–æ–µ–≤ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º</p>
                <div className="btn-group">
                    <button className="btn btn-outline-dark active">–í—Å–µ</button>
                    <button className="btn btn-danger">–û–≥–æ–Ω—å</button>
                    <button className="btn btn-primary">–í–æ–¥–∞</button>
                    <button className="btn btn-success">–í–µ—Ç–µ—Ä</button>
                    <button className="btn btn-secondary">–ó–µ–º–ª—è</button>
                </div>
            </div>
        </div>
    )
}

export default HeroesFilters;
```

–¢—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤—ë—Ä—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –±–µ–∑ –ª–æ–≥–∏–∫–∏

`components > heroesAddForm > HeroesAddForm.js`
```JS
const HeroesAddForm = () => {
    return (
        <form className="border p-4 shadow-lg rounded">
            <div className="mb-3">
                <label htmlFor="name" className="form-label fs-4">–ò–º—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è</label>
                <input 
                    required
                    type="text" 
                    name="name" 
                    className="form-control" 
                    id="name" 
                    placeholder="–ö–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?"/>
            </div>

            <div className="mb-3">
                <label htmlFor="text" className="form-label fs-4">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea
                    required
                    name="text" 
                    className="form-control" 
                    id="text" 
                    placeholder="–ß—Ç–æ —è —É–º–µ—é?"
                    style={{"height": '130px'}}/>
            </div>

            <div className="mb-3">
                <label htmlFor="element" className="form-label">–í—ã–±—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≥–µ—Ä–æ—è</label>
                <select 
                    required
                    className="form-select" 
                    id="element" 
                    name="element">
                    <option >–Ø –≤–ª–∞–¥–µ—é —ç–ª–µ–º–µ–Ω—Ç–æ–º...</option>
                    <option value="fire">–û–≥–æ–Ω—å</option>
                    <option value="water">–í–æ–¥–∞</option>
                    <option value="wind">–í–µ—Ç–µ—Ä</option>
                    <option value="earth">–ó–µ–º–ª—è</option>
                </select>
            </div>

            <button type="submit" className="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
        </form>
    )
}

export default HeroesAddForm;
```

–ò —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∏—Ç–æ–≥–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, —á—Ç–æ–±—ã –æ–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `json-server`, —Å–æ–∑–¥–∞–≤–∞–ª–æ –Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –º–µ–Ω—è–ª–æ —Å—Ç–µ–π—Ç –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º:

![](_png/b180999d720fead4852a1e0905d8306c.png)


## 010 –†–∞–∑–±–æ—Ä —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤


–§–∏–ª—å—Ç—Ä—ã –±—ã–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –∏ –≤–Ω—É—Ç—Ä—å –Ω–∏—Ö –±—ã–ª–∏ –ø–æ–º–µ—â–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –ª–µ–π–±–ª—É –∏ –∫–ª–∞—Å—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –∫–Ω–æ–ø–∫–∏

`heroes.json`
```JSON
{
  "heroes": [
    {
      "id": 1,
      "name": "–ü–µ—Ä–≤—ã–π –≥–µ—Ä–æ–π",
      "description": "–ü–µ—Ä–≤—ã–π –≥–µ—Ä–æ–π –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ!",
      "element": "fire"
    },
    {
      "id": 2,
      "name": "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–µ—Ä–æ–π",
      "description": "–°–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –≤ —Ç–µ–Ω–∏",
      "element": "wind"
    },
    {
      "id": 3,
      "name": "–ú–æ—Ä—Å–∫–æ–π –≥–µ—Ä–æ–π",
      "description": "–ö–∞–∫ –∞–∫–≤–∞–º–µ–Ω, –Ω–æ –Ω–µ –∏–∑ DC",
      "element": "water"
    }
  ],
  "filters": [
    {
      "name": "all",
      "label": "–í—Å–µ",
      "className": "btn-outline-dark"
    },
    {
      "name": "fire",
      "label": "–û–≥–æ–Ω—å",
      "className": "btn-danger"
    },
    {
      "name": "water",
      "label": "–í–æ–¥–∞",
      "className": "btn-primary"
    },
    {
      "name": "wind",
      "label": "–í–µ—Ç–µ—Ä",
      "className": "btn-success"
    },
    {
      "name": "earth",
      "label": "–ó–µ–º–ª—è",
      "className": "btn-secondary"
    }
  ]
}
```

–í —ç–∫—à–µ–Ω—ã –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–µ—ç–π—Ç–æ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

`actions > index.js`
```JS
// –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≥–µ—Ä–æ–µ–≤
export const heroesFetching = () => {
    return {
        type: 'HEROES_FETCHING'
    }
}

// –≥–µ—Ä–æ–∏ –ø–æ–ª—É—á–µ–Ω—ã
// —Ç–∞–∫ –∂–µ —Å—é–¥–∞ –ø–æ—Å—Ç—É–ø–∞—é—Ç –∏ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ –≥–µ—Ä–æ—è–º, —á—Ç–æ–±—ã –∑–∞–Ω–µ—Å—Ç–∏ –∏—Ö –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
export const heroesFetched = (heroes) => {
    return {
        type: 'HEROES_FETCHED',
        payload: heroes
    }
}

// –æ—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
export const heroesFetchingError = () => {
    return {
        type: 'HEROES_FETCHING_ERROR'
    }
}

// –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –±—ç–∫–∞
export const filtersFetching = () => {
    return {
        type: 'FILTERS_FETCHING'
    }
}

// —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–ª—É—á–µ–Ω—ã
// —Ç–∞–∫ –∂–µ —Å—é–¥–∞ –ø–æ—Å—Ç—É–ø–∞—é—Ç –∏ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º, —á—Ç–æ–±—ã –∑–∞–Ω–µ—Å—Ç–∏ –∏—Ö –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
export const filtersFetched = (filters) => {
    return {
        type: 'FILTERS_FETCHED',
        payload: filters
    }
}

// –æ—à–∏–±–∫–∞ —Ñ–µ—Ç—á–∞ —Ñ–∏–ª—Ç—Ä–æ–≤
export const filtersFetchingError = () => {
    return {
        type: 'FILTERS_FETCHING_ERROR'
    }
}

// –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—Ç—Ä–æ–≤
export const activeFilterChanged = (filter) => {
    return {
        type: 'ACTIVE_FILTER_CHANGED',
        payload: filter
    }
}

// –≥–µ—Ä–æ–π —Å–æ–∑–¥–∞–Ω 
// —Å—é–¥–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ –≥–µ—Ä–æ—é —Å —Ñ–æ—Ä–º—ã
export const heroCreated = (hero) => {
    return {
        type: 'HERO_CREATED',
        payload: hero
    }
}

// –≥–µ—Ä–æ–π —É–¥–∞–ª—ë–Ω
// —Å—é–¥–∞ –ø–æ—Å—Ç—É–ø–∞—é—Ç –¥–∞–Ω–Ω—ã–µ id –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
export const heroDeleted = (id) => {
    return {
        type: 'HERO_DELETED',
        payload: id
    }
}
```

–í —Ä–µ–¥—å—é—Å–µ—Ä –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–µ–π—Å—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —É–¥–∞–ª–µ–Ω–∏—è –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞. –¢–∞–∫ –∂–µ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

`reducers > index.js`
```JS
const initialState = {
    heroes: [], // –≥–µ—Ä–æ–∏
    heroesLoadingStatus: 'idle', // —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ –≥–µ—Ä–æ—è
    filters: [], // —Ñ–∏–ª—å—Ç—Ä—ã
    filtersLoadingStatus: 'idle', // —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    activeFilter: 'all', // –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã
    filteredHeroes: [] // –º–∞—Å—Å–∏–≤ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥–µ—Ä–æ–µ–≤
}

const reducer = (state = initialState, action) => {
    switch (action.type) {
        case 'HEROES_FETCHING':
            return {
                ...state,
                heroesLoadingStatus: 'loading'
            }
        case 'HEROES_FETCHED':
            return {
                ...state,
                heroes: action.payload,
                // –≠–¢–û –ú–û–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –ò –ü–û –î–†–£–ì–û–ú–£
                // –Ø —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é –≤–∞—Ä–∏–∞–Ω—Ç —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Ç—É—Ç, –Ω–æ –±–æ–ª–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
                // –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ
                filteredHeroes: state.activeFilter === 'all' ? 
                                action.payload : 
                                action.payload.filter(item => item.element === state.activeFilter),
                heroesLoadingStatus: 'idle'
            }
        case 'HEROES_FETCHING_ERROR':
            return {
                ...state,
                heroesLoadingStatus: 'error'
            }
        case 'FILTERS_FETCHING':
            return {
                ...state,
                filtersLoadingStatus: 'loading'
            }
        case 'FILTERS_FETCHED':
            return {
                ...state,
                filters: action.payload,
                filtersLoadingStatus: 'idle'
            }
        case 'FILTERS_FETCHING_ERROR':
            return {
                ...state,
                filtersLoadingStatus: 'error'
            }
        case 'ACTIVE_FILTER_CHANGED':
            return {
                ...state,
                activeFilter: action.payload,
                filteredHeroes: action.payload === 'all' ? 
                                state.heroes :
                                state.heroes.filter(item => item.element === action.payload)
            }
        // –°–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å - —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
        // –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏
        case 'HERO_CREATED':
            // –§–æ—Ä–º–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤    
            let newCreatedHeroList = [...state.heroes, action.payload];
            return {
                ...state,
                heroes: newCreatedHeroList,
                // –§–∏–ª—å—Ç—Ä—É–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É, –∫–æ—Ç–æ—Ä—ã–π —Å–µ–π—á–∞—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
                filteredHeroes: state.activeFilter === 'all' ? 
                                newCreatedHeroList : 
                                newCreatedHeroList.filter(item => item.element === state.activeFilter)
            }
        case 'HERO_DELETED': 
            // –§–æ—Ä–º–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
            const newHeroList = state.heroes.filter(item => item.id !== action.payload);
            return {
                ...state,
                heroes: newHeroList,
                // –§–∏–ª—å—Ç—Ä—É–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É, –∫–æ—Ç–æ—Ä—ã–π —Å–µ–π—á–∞—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
                filteredHeroes: state.activeFilter === 'all' ? 
                                newHeroList : 
                                newHeroList.filter(item => item.element === state.activeFilter)
            }
        default: return state
    }
}

export default reducer;
```

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –≥–µ—Ä–æ–µ–≤ –¥–æ–±–∞–≤–∏–ª–∞—Å—å —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –æ–Ω–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –æ–¥–Ω–∏–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º. –¢–∞–∫ –∂–µ –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ

`components > heroesList > HeroesList.js`
```JS
import {useHttp} from '../../hooks/http.hook';
import { useEffect, useCallback } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { CSSTransition, TransitionGroup} from 'react-transition-group';

import { heroesFetching, heroesFetched, heroesFetchingError, heroDeleted } from '../../actions';
import HeroesListItem from "../heroesListItem/HeroesListItem";
import Spinner from '../spinner/Spinner';

import './heroesList.scss';

const HeroesList = () => {
    const {filteredHeroes, heroesLoadingStatus} = useSelector(state => state);
    const dispatch = useDispatch();
    const {request} = useHttp();

    useEffect(() => {
        dispatch(heroesFetching());
        request("http://localhost:3001/heroes")
            .then(data => dispatch(heroesFetched(data)))
            .catch(() => dispatch(heroesFetchingError()))

        // eslint-disable-next-line
    }, []);

    // –§—É–Ω–∫—Ü–∏—è –±–µ—Ä–µ—Ç id –∏ –ø–æ –Ω–µ–º—É —É–¥–∞–ª—è–µ—Ç –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–∑ store
    // –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Ü–µ–ø–æ—á–∫—É –¥–µ–π—Å—Ç–≤–∏–π actions => reducers
    // —Ç–∞–∫ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∏–∂–µ –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏, —Ç–æ –µ—ë —Å—Ç–æ–∏—Ç –æ–±–µ—Ä–Ω—É—Ç—å –≤ useCallback, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∞ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    const onDelete = useCallback((id) => {
        // –£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ –µ–≥–æ id
        request(`http://localhost:3001/heroes/${id}`, "DELETE")
            .then(data => console.log(data, 'Deleted'))
            .then(dispatch(heroDeleted(id)))
            .catch(err => console.log(err));
    }, [request]);

    if (heroesLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (heroesLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderHeroesList = (arr) => {
        if (arr.length === 0) {
            return (
                <CSSTransition
                    timeout={0}
                    classNames="hero">
                    <h5 className="text-center mt-5">–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
                </CSSTransition>
            )
        }

        return arr.map(({id, ...props}) => {
            return (
                <CSSTransition 
                    key={id}
                    timeout={500}
                    classNames="hero">
                    <HeroesListItem  {...props} onDelete={() => onDelete(id)}/>
                </CSSTransition>
            )
        })
    }

    const elements = renderHeroesList(filteredHeroes);
    return (
        <TransitionGroup component="ul">
            {elements}
        </TransitionGroup>
    )
}

export default HeroesList;
```

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ 

`components > heroesListItem > HeroesListItem.js`
```JS
const HeroesListItem = ({name, description, element, onDelete}) => {

    let elementClassName;

    switch (element) {
        case 'fire':
            elementClassName = 'bg-danger bg-gradient';
            break;
        case 'water':
            elementClassName = 'bg-primary bg-gradient';
            break;
        case 'wind':
            elementClassName = 'bg-success bg-gradient';
            break;
        case 'earth':
            elementClassName = 'bg-secondary bg-gradient';
            break;
        default:
            elementClassName = 'bg-warning bg-gradient';
    }

    return (
        <li 
            className={`card flex-row mb-4 shadow-lg text-white ${elementClassName}``}>
            <img src="http://www.stpaulsteinbach.org/wp-content/uploads/2014/09/unknown-hero.jpg" 
                 className="img-fluid w-25 d-inline" 
                 alt="unknown hero" 
                 style={{'objectFit': 'cover'}}/>
            <div className="card-body">
                
                <h3 className="card-title">{name}</h3>
                <p className="card-text">{description}</p>
            </div>
            <span onClick={onDelete} 
                className="position-absolute top-0 start-100 translate-middle badge border rounded-pill bg-light">
                <button type="button" className="btn-close btn-close" aria-label="Close"></button>
            </span>
        </li>
    )
}

export default HeroesListItem;
```

–í —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–Ω–ø—É—Ç–æ–≤.

–ë—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `onSubmitHandler`, –∫–æ—Ç–æ—Ä–∞—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã

`components > heroesAddForm > HeroesAddForm.js`
```JS
// –ó–∞–¥–∞—á–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
// –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è —Å –≤–≤–µ–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –û–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å
// –≤ –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ + —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è
// –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ uiid
// –£—Å–ª–æ–∂–Ω–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞:
// –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –≤ —Ñ–∞–π–ª–µ json –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ POST
// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
// –≠–ª–µ–º–µ–Ω—Ç—ã <option></option> –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –±–∞–∑–µ
// –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤

import {useHttp} from '../../hooks/http.hook';
import { useState } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { v4 as uuidv4 } from 'uuid';

import { heroCreated } from '../../actions';

const HeroesAddForm = () => {
    // –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ñ–æ—Ä–º—ã
    const [heroName, setHeroName] = useState('');
    const [heroDescr, setHeroDescr] = useState('');
    const [heroElement, setHeroElement] = useState('');

    const {filters, filtersLoadingStatus} = useSelector(state => state);
    const dispatch = useDispatch();
    const {request} = useHttp();

    const onSubmitHandler = (e) => {
        e.preventDefault();
        // –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π,
        // —Ö–æ—Ç–µ–ª –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞–º —á—É—Ç—å –Ω–∞–≥–ª—è–¥–Ω–µ–µ
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è id —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
        const newHero = {
            id: uuidv4(),
            name: heroName,
            description: heroDescr,
            element: heroElement
        }

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
        // –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ store
        request("http://localhost:3001/heroes", "POST", JSON.stringify(newHero))
            .then(res => console.log(res, '–û—Ç–ø—Ä–∞–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞'))
            .then(dispatch(heroCreated(newHero)))
            .catch(err => console.log(err));

        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
        setHeroName('');
        setHeroDescr('');
        setHeroElement('');
    }

    const renderFilters = (filters, status) => {
        if (status === "loading") {
            return <option>–ó–∞–≥—Ä—É–∑–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</option>
        } else if (status === "error") {
            return <option>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</option>
        }
        
        // –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –µ—Å—Ç—å, —Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏–º –∏—Ö
        if (filters && filters.length > 0 ) {
            return filters.map(({name, label}) => {
                // –û–¥–∏–Ω –∏–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–∞–º —Ç—É—Ç –Ω–µ –Ω—É–∂–µ–Ω
                if (name === 'all')  return;

                return <option key={name} value={name}>{label}</option>
            })
        }
    }

    return (
        <form className="border p-4 shadow-lg rounded" onSubmit={onSubmitHandler}>
            <div className="mb-3">
                <label htmlFor="name" className="form-label fs-4">–ò–º—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è</label>
                <input 
                    required
                    type="text" 
                    name="name" 
                    className="form-control" 
                    id="name" 
                    placeholder="–ö–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?"
                    value={heroName}
                    onChange={(e) => setHeroName(e.target.value)}/>
            </div>

            <div className="mb-3">
                <label htmlFor="text" className="form-label fs-4">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea
                    required
                    name="text" 
                    className="form-control" 
                    id="text" 
                    placeholder="–ß—Ç–æ —è —É–º–µ—é?"
                    style={{"height": '130px'}}
                    value={heroDescr}
                    onChange={(e) => setHeroDescr(e.target.value)}/>
            </div>

            <div className="mb-3">
                <label htmlFor="element" className="form-label">–í—ã–±—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≥–µ—Ä–æ—è</label>
                <select 
                    required
                    className="form-select" 
                    id="element" 
                    name="element"
                    value={heroElement}
                    onChange={(e) => setHeroElement(e.target.value)}>
                    <option value="">–Ø –≤–ª–∞–¥–µ—é —ç–ª–µ–º–µ–Ω—Ç–æ–º...</option>
                    {renderFilters(filters, filtersLoadingStatus)}
                </select>
            </div>

            <button type="submit" className="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
        </form>
    )
}

export default HeroesAddForm;
```

–¢—É—Ç –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø–æ–ª—É—á–∞–µ–º —Å —Å–µ—Ä–≤–µ—Ä–∞

`components > heroesFilters > HeroesFilters.js`
```JS
import {useHttp} from '../../hooks/http.hook';
import {useEffect} from 'react';
import {useDispatch, useSelector} from 'react-redux';
import classNames from 'classnames';

import {filtersFetching, filtersFetched, filtersFetchingError, activeFilterChanged} from '../../actions';
import Spinner from '../spinner/Spinner';

// –ó–∞–¥–∞—á–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
// –§–∏–ª—å—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
// –§–∏–ª—å—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –≥–µ—Ä–æ–µ–≤ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ
// –ê–∫—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∏–º–µ–µ—Ç –∫–ª–∞—Å—Å active

const HeroesFilters = () => {

    const {filters, filtersLoadingStatus, activeFilter} = useSelector(state => state);
    const dispatch = useDispatch();
    const {request} = useHttp();

    // –ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Å–º–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
    useEffect(() => {
        dispatch(filtersFetching());
        request("http://localhost:3001/filters")
            .then(data => dispatch(filtersFetched(data)))
            .catch(() => dispatch(filtersFetchingError()))

        // eslint-disable-next-line
    }, []);

    if (filtersLoadingStatus === "loading") {
        return <Spinner/>;
    } else if (filtersLoadingStatus === "error") {
        return <h5 className="text-center mt-5">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>
    }

    const renderFilters = (arr) => {
        if (arr.length === 0) {
            return <h5 className="text-center mt-5">–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h5>
        }

        // –î–∞–Ω–Ω—ã–µ –≤ json-—Ñ–∞–π–ª–µ —è —Ä–∞—Å—à–∏—Ä–∏–ª –∫–ª–∞—Å—Å–∞–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º
        return arr.map(({name, className, label}) => {

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É classnames –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –∫–ª–∞—Å—Å—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
            const btnClass = classNames('btn', className, {
                'active': name === activeFilter
            });

            return <button
                key={name}
                id={name}
                className={btnClass}
                onClick={() => dispatch(activeFilterChanged(name))}
            >{label}</button>
        })
    }

    const elements = renderFilters(filters);

    return (
        <div className="card shadow-lg mt-4">
            <div className="card-body">
                <p className="card-text">–û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –≥–µ—Ä–æ–µ–≤ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º</p>
                <div className="btn-group">
                    {elements}
                </div>
            </div>
        </div>
    )
}

export default HeroesFilters;
```

–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

![](_png/f73b65d8851223cf2b61023d552c47a4.png)


## 011 –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ reducers –∏ –∫—Ä–∞—Å–∏–≤—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã. CreateSelector()


–ü—Ä–∏ —Ä–∞–∑—Ä–∞—Å—Ç–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–∫—Ç. –ï—Å–ª–∏ —ç–∫—à–µ–Ω—ã –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ø–æ –ø–∞–ø–∫–∞–º –∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∫ –Ω—É–∂–Ω—ã–º, —Ç–æ –¥–∞–Ω–Ω–æ–µ —Ä–∞–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç —Å–ø–æ–∫–æ–π–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—å—é—Å–µ—Ä

–í –Ω–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–æ–≥–∏—á–Ω—ã–º –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏. –û–¥–Ω–∞–∫–æ –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å —Ç–µ–º, —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä—ã —Ç–∞–∫ –∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, —á—Ç–æ–±—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å–ø–∏—Å–æ–∫.

![](_png/68f0062f0d1040d2a1a1be1318ac1a58.png)

–ß—Ç–æ–±—ã —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–¥ –∏ —Ä–∞–∑–±–∏—Ç—å –ª–æ–≥–∏–∫—É, –º–æ–∂–Ω–æ:
- —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–µ–¥—å—é—Å–µ—Ä–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `combineReducers`
- –≤—ã–Ω–µ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –≤–Ω—É—Ç—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ–±—ã —Ä–∞–∑–±–∏—Ç—å –ª–æ–≥–∏–∫—É —Å—Ç–µ–π—Ç–æ–≤

–¢—É—Ç –º—ã –≤—ã–Ω–æ—Å–∏–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–µ–π—Ç–∞ –∏ —Ç–µ–ø–µ—Ä—å –µ—ë –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ä–µ–¥—å—é—Å–µ—Ä–∞

`components > heroesList > HeroesList.js`
```JS
const HeroesList = () => {
	const filteredHeroes = useSelector((state) => {
		if (state.activeFilter === 'all') {
			return state.heroes;
		} else {
			return state.heroes.filter((item) => state.heroes === state.activeFilter);
		}
	});

	// —Å–µ–π—á–∞—Å –æ—Ç—Å—é–¥–∞ –¥–æ—Å—Ç–∞—ë–º –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏
	const heroesLoadingStatus = useSelector((state) => state.heroesLoadingStatus);

	/// CODE ...
```

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –¥–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

![](_png/d8db1749a7d26bae78fe9519ad62e31c.png)

–ò –¥–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–µ–¥—å—é—Å–µ—Ä–µ

![](_png/42dd7a34895f58fbfe0582280f88f756.png)

–í—ã–Ω–µ—Å–µ–º –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ `reducer` –ª–æ–≥–∏–∫—É –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –∏ –µ–≥–æ —Å—Ç–µ–π—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª

`reducers > heroes.js`
```JS
const initialState = {
	heroes: [],
	heroesLoadingStatus: 'idle',
};

export const heroes = (state = initialState, action) => {
	switch (action.type) {
		case 'HEROES_FETCHING':
			return {
				...state,
				heroesLoadingStatus: 'loading',
			};
		case 'HEROES_FETCHED':
			return {
				...state,
				heroes: action.payload,
				heroesLoadingStatus: 'idle',
			};
		case 'HEROES_FETCHING_ERROR':
			return {
				...state,
				heroesLoadingStatus: 'error',
			};
		// –°–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å - —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
		// –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏
		case 'HERO_CREATED':
			return {
				...state,
				heroes: [...state.heroes, action.payload],
			};
		case 'HERO_DELETED':
			return {
				...state,
				heroes: state.heroes.filter((item) => item.id !== action.payload),
			};
		default:
			return state;
	}
};
```

–¢—É—Ç —É–∂–µ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

`reducers > filters.js`
```JS
const initialState = {
	filters: [],
	filtersLoadingStatus: 'idle',
	activeFilter: 'all',
};

export const filters = (state = initialState, action) => {
	switch (action.type) {
		case 'FILTERS_FETCHING':
			return {
				...state,
				filtersLoadingStatus: 'loading',
			};
		case 'FILTERS_FETCHED':
			return {
				...state,
				filters: action.payload,
				filtersLoadingStatus: 'idle',
			};
		case 'FILTERS_FETCHING_ERROR':
			return {
				...state,
				filtersLoadingStatus: 'error',
			};
		case 'ACTIVE_FILTER_CHANGED':
			return {
				...state,
				activeFilter: action.payload,
			};
		default:
			return state;
	}
};
```

–ò —Ç—É—Ç —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `combineReducers` –æ–±—ä–µ–¥–∏–Ω—è–µ–º –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–¥—å—é—Å–µ—Ä–∞ –≤ –æ–¥–∏–Ω –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞. –¢–µ–ø–µ—Ä—å –æ–±—ã—á–Ω—ã–π `reducer` –Ω–µ –Ω—É–∂–µ–Ω –∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª–∏—Ç—å

`store > index.js`
```JS
import { createStore, combineReducers } from 'redux';
import { heroes } from '../reducers/heroes';
import { filters } from '../reducers/filters';

const store = createStore(
	combineReducers({ heroes, filters }),
	window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),
);

export default store;
```

–ò —Ç–µ–ø–µ—Ä—å, –ø–æ—Å–ª–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –Ω–∞–∑–≤–∞–Ω—ã –∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ `combineReducers`

![](_png/713f723dda34b77f5021e44c63b95440.png)

–ò –≤–æ—Ç —É–∂–µ —Å —Ç–∞–∫–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º –º—ã –º–æ–∂–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—è –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
–û–¥–Ω–∞–∫–æ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–µ–π—Ç–∞
*–¢–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω*

```JS
const someState = useSelector((state) => ({  
   activeFilter: state.filters.activeFilter,  
   heroes: state.heroes.heroes,  
}));
```

–û—Ç–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É —Ñ–∏–ª—Ç—Ä–∞—Ü–∏–∏ –≥–µ—Ä–æ–µ–≤.
–ù–æ —Ç—É—Ç –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è —Å —Ç–∞–∫–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π, —á—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —É –Ω–∞—Å –±—É–¥–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ —É –Ω–∞—Å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `useSelector()` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å—Ç–µ–π—Ç–∞.

`components > heroesList > HeroesList.js`
```JS
const HeroesList = () => {  
   const filteredHeroes = useSelector((state) => {  
      if (state.filters.activeFilter === 'all') {  
	      console.log('render');
         return state.heroes.heroes;  
      } else {  
         return state.heroes.heroes.filter(  
            (item) => item.element === state.filters.activeFilter,  
         );  
      }  
   });

	/// CODE ...
```

![](_png/4cda56fec96d93c17978b77606666abf.png)

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, –Ω—É–∂–Ω–æ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–∑–æ–≤–∞ `useSelector()`

```bash
npm i reselect
```

–î–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –≤—ã–∑–≤–∞—Ç—å –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º —Ñ—É–Ω–∫—Ü–∏—é `useSelector`. –¢–æ –µ—Å—Ç—å –º—ã —Å–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, –∞ –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –±–µ—Ä—ë–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö –≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ. 
–ü–æ—Å–ª–µ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—â–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ—Å–µ–ª–µ–∫—Ç–∞ –≤–Ω—É—Ç—Ä—å `useSelector` 

`components > heroesList > HeroesList.js`
```JS
import { createSelector } from 'reselect';

/// CODE ...

// —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞—Ç—å useSelector –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –∏ –±—É–¥–µ—Ç –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ  
const filteredHeroesSelector = createSelector(  
   // –≤—ã–∑—ã–≤–∞–µ–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –¥–≤—É—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤  
   // –ø–æ–ª—É—á–∞–µ–º —Å–∞–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∏ –º–∞—Å—Å–∏–≤ –≥–µ—Ä–æ–µ–≤   [(state) => state.filters.activeFilter, (state) => state.heroes.heroes],  
   // –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–≤—É—Ö –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤  
   (filter, heroes) => {  
      if (filter === 'all') {  
         console.log('render');  
         return heroes;  
      } else {  
         return heroes.filter((item) => item.element === filter);  
      }  
   },  
);  
  
const filteredHeroes = useSelector(filteredHeroesSelector);

/// CODE ...
```

–¢–µ–ø–µ—Ä—å —Ä–µ–Ω–¥–µ—Ä –≤—ã–∑–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç–µ–π—Ç–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è

![](_png/5e09e8e34adefe980e8d2bb292c5b57d.png)


## 012 –ü—Ä–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–Ω–∏–π - —ç—Ç–æ —Å–ª–æ–∂–Ω–æ, –Ω–æ –Ω—É–∂–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞

![](_png/84bad1784457eafb73324452c2809751.png)

> **–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ**


## 013 Store enhancers


==Store enhancers== - —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º. –ó–∞—á–∞—Å—Ç—É—é –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ *npm-–ø–∞–∫–µ—Ç—ã*, –Ω–æ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∏ —Å–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ª—É—á—à–∏—Ç–µ–ª—è.

–¢–∞–∫ –∂–µ —á–∞—Å—Ç–Ω—ã–º —Å–ª—É—á–∞–µ–º —ç–Ω—Ö—ç–Ω—Å–µ—Ä–æ–≤ —è–≤–ª—è–µ—Ç—Å—è `middleware` —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫ –∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Å—Ç–æ—Ä.

–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —ç–Ω—Ö—ç–Ω—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∏—Å–ø—ç—Ç—á–∞. –û–Ω –±—É–¥–µ—Ç –≤ —Å–µ–±—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º, –Ω–æ –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å —ç–∫—à–µ–Ω —Ç–∞–π–ø—Ç–æ–º.

–¢—É—Ç —É–∂–µ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–∞–º–∏—Ö —É–ª—É—á—à–∏—Ç–µ–ª–µ–π —Å—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –ø–æ—ç—Ç–æ–º—É –∏—Ö —á–∞—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—é—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `compose`, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏—Ö –≤ –æ–¥–∏–Ω. –û–¥–Ω–∞–∫–æ —Ç–∞–∫ –∂–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–æ–±–ª—é–¥–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –±—É–¥—É—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —Å—Ç—Ä–æ–∫—É —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ —Ä–µ–¥–∞–∫—Å-–¥–µ–≤—Ç—É–ª–∑—É —Å—Ç–æ–∏—Ç –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞.

```JS
import { createStore, combineReducers, compose } from 'redux';
import { heroes } from '../reducers/heroes';
import { filters } from '../reducers/filters';

const enhancer =
	(createStore) =>
	// —Å—é–¥–∞ –ø–æ–ø–∞–¥–∞—é—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏
	(...args) => {
		// —Ç—É—Ç –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –≤ —Ñ—É–Ω–∫—Ü–∏—é —Å—Ç–æ—Ä–∞ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤—ã–∑–≤–∞–µ–º –µ—ë
		const store = createStore(...args);

		// —ç—Ç–æ —Å—Ç–∞—Ä—ã–π –¥–∏—Å–ø–µ—Ç—á, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –æ–±—ä–µ–∫—Ç
		const oldDispatch = store.dispatch;

		// –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–∏—Å–ø–µ—Ç—á, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ–∫—Å—Ç–æ–º
		store.dispatch = (action) => {
			if (typeof action === 'string') {
				return oldDispatch({ type: action });
			}

			// –µ—Å–ª–∏ –±—ã–ª–∞ –ø–µ—Ä–µ–¥–∞–Ω–∞ –Ω–µ —Å—Ç—Ä–æ–∫–∞, —Ç–æ –∏–º–∏—Ç–∏—Ä—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É
			return oldDispatch(action);
		};

		return store;
	};

const store = createStore(
	combineReducers({ heroes, filters }),
	compose(
		enhancer, 
		window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
	),
);

export default store;
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–∞–∫ –∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –¥–∏—Å–ø–µ—Ç—á –∏ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫—É —Å –¥–µ–π—Å—Ç–≤–∏–µ–º

![](_png/dd400bb592bce412f86ea5d95b35788c.png)


## 014 Middleware


==Middleware== - —ç—Ç–æ `enhancer`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ–º —Ç–æ–ª—å–∫–æ `dispatch`. –¢–∞–∫ –∂–µ –∑–∞—á–∞—Å—Ç—É—é –ø–æ–ª—å–∑—É—é—Ç—Å—è —É–∂–µ –≥–æ—Ç–æ–≤—ã–º–∏ middleware, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–º—å—é–Ω–∏—Ç–∏ npm

–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ç—É—Ç —Å–¥–µ–ª–∞–µ–º –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç—å `dispatch` –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã, –Ω–æ –∏ —Å—Ç—Ä–æ–∫–∏ 

`store > index.js`
```JS
// —Ñ—É–Ω–∫—Ü–∏—è-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ dispatch
// —Å—é–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –ø–æ–ø–∞–¥–∞—Ç—å –¥–≤–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏–∑ store - dispatch, getState
const stringMiddleware =
	({ dispatch, getState }) =>
	// –ø–æ—Ç–æ–º –∑–¥–µ—Å—å –º—ã –±—É–µ–º –ø—Ä–∏–Ω–∏–º–∞—Ç—å dispatch
	(dispatch) =>
	// –∞ —ç—Ç–æ —É–∂–µ –ø–æ-—Ñ–∞–∫—Ç—É –∏ –µ—Å—Ç—å –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è dispatch —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
	(action) => {
		if (typeof action === 'string') {
			return dispatch({ type: action });
		}

		return dispatch(action);
	};
```

- –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –º–æ–∂–Ω–æ —Ç–∞–∫ –∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–º –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–µ–Ω `store`
- –æ–±—ã—á–Ω–æ, —Ñ—É–Ω–∫—Ü–∏—é `dispatch` –Ω–∞–∑—ã–≤–∞—é—Ç `next`, —Ç–∞–∫ –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ `middleware`

`store > index.js`
```JS
const stringMiddleware =
	() =>
	(next) =>
	(action) => {
		if (typeof action === 'string') {
			return next({ type: action });
		}

		return next(action);
	};
```

–ß—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω—è—Ç—å `middleware` –≤ `createStore`, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `applyMiddleware`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞. 

–ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–¥–∞–∫—Å-–¥–µ–≤—Ç—É–ª–∑—É, –º–æ–∂–Ω–æ –æ–ø—è—Ç—å –∂–µ –æ–±–µ—Ä–Ω—É—Ç—å –≤–µ—Å—å –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç `createStore` –≤ —Ñ—É–Ω–∫—Ü–∏—é `compose()`

`store > index.js`
```JS
const store = createStore(
	combineReducers({ heroes, filters }),
	compose(
		applyMiddleware(stringMiddleware),
		window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),
	),
);
```


## 015 Redux-thunk


–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –º–æ–¥—É–ª—è `redux-thunk` –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Ç–æ–º –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–∫–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç. 

```bash
npm i redux-thunk
```

–ò –¥–∞–ª–µ–µ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—å `actionCreater` —Ñ—É–Ω–∫—Ü–∏—é –≤ `dispatch` –±–µ–∑ –≤—ã–∑–æ–≤–∞:

`components > heroesList > HeroesList.js`
```JS
// —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å —Å–µ—Ä–≤–µ—Ä–∞
useEffect(() => {  
   dispatch(heroesFetching); // –ø–µ—Ä–µ–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é —ç–∫—à–µ–Ω–∞ –±–µ–∑ –≤—ã–∑–æ–≤–∞
   request('http://localhost:3001/heroes')  
      .then((data) => dispatch(heroesFetched(data)))  
      .catch(() => dispatch(heroesFetchingError()));  
}, []);
```

–¢–∞–∫ –∂–µ –º—ã –º–æ–∂–µ–º —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–∞—à–∏ —ç–∫—à–µ–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –≤ –∏—Ö –≤–ª–æ–∂–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å—Ç—É–ø–∞—Ç—å dispatch, –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º –º—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏. 
–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ç—É—Ç –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç–µ–π—Ç —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏.

`actions > index.js`
```JS
// –∫–æ–≥–¥–∞ –º—ã –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –≤ —Å–µ–±—è dispatch  
// dispatch –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç–∞–∫ –∫–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º thunk middleware  
export const activeFilterChanged = (filter) => (dispatch) => {  
   setTimeout(() => {  
      dispatch({  
         type: 'ACTIVE_FILTER_CHANGED',  
         payload: filter,  
      });  
   }, 1000);  
};
```

–ù–æ —Ç–∞–∫ –∂–µ –º—ã –º–æ–∂–µ–º –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–µ–±–µ –∂–∏–∑–Ω—å —Ç–µ–º, —á—Ç–æ –º—ã –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –¥–∏—Å–ø–µ—Ç—á–∞ –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–π –ø–∞–ø–∫–∏ —ç–∫—à–µ–Ω–æ–≤. 
–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –º—ã –º–æ–∂–µ–º –≤—ã–Ω–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –∑–∞–Ω–µ—Å–µ–Ω–∏–µ –∏—Ö –≤ —Å—Ç–µ–π—Ç –ø—Ä—è–º–æ –∏–∑ —ç–∫—à–µ–Ω–æ–≤. –¢–∞–º –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —ç–∫—à–µ–Ω—ã - –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∏–º–∏ –ø—Ä–æ—Å—Ç–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.

`actions > index.js`
```JS
export const fetchHeroes = (request) => (dispatch) => {
	dispatch(heroesFetching());
	request('http://localhost:3001/heroes')
		.then((data) => dispatch(heroesFetched(data)))
		.catch(() => dispatch(heroesFetchingError()));
};
```

![](_png/8b54a08985f63e69d276dd56f4cd93ad.png)

–ò —Ç—É—Ç –¥–∞–ª–µ–µ –≤ —Å–∞–º–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —É–∂–µ –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ–¥–Ω–∏–º —ç–∫—à–µ–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –∑–∞–Ω–µ—Å—ë—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º –≤ —Å—Ç–µ–π—Ç, –ø–µ—Ä–µ–¥–∞–≤ –≤ –Ω–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–∫–≤–µ—Å—Ç–∞

`components > heroesList > HeroesList.js`
```JS
import { fetchHeroes, heroDeleted } from '../../actions';

const HeroesList = () => {
	/// CODE ...
	
	const { request } = useHttp();

	useEffect(() => {
		dispatch(fetchHeroes(request));
	}, []);
```


## Redux Toolkit

#RTK #Redux #ReduxToolkit


–ü—Ä–æ–±–ª–µ–º—ã –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ –æ–±—ã—á–Ω–æ–º —Ä–µ–¥–∞–∫—Å–∞:
- –æ—á–µ–Ω—å –º–Ω–æ–≥–æ *boilerplates* –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `actionCreators` –∏ `reducers`
- –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ `enhancers` –∏ `middlewares` —Ñ—É–Ω–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é `store` —Å–∏–ª—å–Ω–æ —Ä–∞–∑—Ä–∞—Å—Ç–∞–µ—Ç—Å—è 

**Redux Toolkit** –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã —Å `states` –∏ `store`. 

–¢–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è `createSelector` –±—ã–ª–∞ –ø–µ—Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ –º–æ–¥—É–ª—è **Reselect** –≤ **RTK** 

### Redux Toolkit `configureStore()`

–§—É–Ω–∫—Ü–∏—è `configureStore` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–¥–æ–±–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å `reducers`, –ø–æ–¥–∫–ª—é—á–∞—Ç—å `middlewares` –∏–ª–∏ `enhancers` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å **redux devtools** –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞  

–í —Ç—É–ª–∫–∏—Ç —Ç–∞–∫ –∂–µ –≤–∫–ª—é—á–µ–Ω—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ `middlewares`:
- *Serializability Middlweware* - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ–±—ã –≤ —Å—Ç–µ–π—Ç–µ –±—ã–ª–∏ —Ç–æ–ª—å–∫–æ —Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–æ—Ä–µ
- *Immutability Middlweware* - –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Å—Ç–æ—Ä–µ
- *Thunk Middlweware* - –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ —ç–∫—à–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å `dispatch`

–ò —É–∂–µ —Ç–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ `store` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **RTK** 

`store > index.js`
```JS
import { heroes } from '../reducers/heroes';
import { filters } from '../reducers/filters';
import { configureStore } from '@reduxjs/toolkit';

const stringMiddleware = () => (next) => (action) => {
	if (typeof action === 'string') {
		return next({ type: action });
	}

	return next(action);
};

const store = configureStore({
	// –ø–æ–¥–∫–ª—é—á–∞–µ–º —Ä–µ–¥—å—é—Å–µ—Ä—ã
	reducer: { heroes, filters },
	// –ø–æ–¥–∫–ª—é—á–∞–µ–º –¥–µ–≤—Ç—É–ª–∑
	devTools: process.env.NODE_ENV === 'development',
	// –ø–æ–¥–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ middleware (–≤–∫–ª—é—á–∞—è thunk) –∏ –Ω–∞—à–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ
	middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(stringMiddleware),
});

export default store;
```

### Redux Toolkit `createAction()`

–§—É–Ω–∫—Ü–∏—è `createAction()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —ç–∫—à–µ–Ω–∞

–§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è:
- —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è 
- –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

–ò –¥–∞–ª–µ–µ —Ç—É—Ç –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –≤ –Ω–µ—ë –¥–∞–Ω–Ω—ã–µ. –¢.–µ. –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å `heroesFetched` –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –Ω–µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç, —Ç–æ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –≤ –ø–æ–ª–µ `payload`

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–≤–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫—à–µ–Ω–æ–≤ - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏ —á–µ—Ä–µ–∑ `createAction` –∏ –æ–±–µ –∏–∑ –Ω–∏—Ö —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º–æ

```JS
export const heroesFetching = () => {
	return {
		type: 'HEROES_FETCHING',
	};
};

export const heroesFetched = (heroes) => {
	return {
		type: 'HEROES_FETCHED',
		payload: heroes,
	};
};

// –ò–õ–ò ...

export const heroesFetching = createAction('HEROES_FETCHING');
export const heroesFetched = createAction('HEROES_FETCHED');
```

> –¢—É—Ç —É–∂–µ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤ `reducer` —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –ø–æ–ª–µ payload. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –±—É–¥–µ—Ç –ø—Ä–æ—â–µ —á–∏—Ç–∞—Ç—å –∫–æ–¥ –∏ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –µ–≥–æ. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–±–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –≤–Ω–µ `reducer`.

–ò –≤–æ—Ç –ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –º—ã –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞—ë–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –æ–±–æ–≥–∞—â—ë–Ω–Ω–æ–≥–æ `payload`, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ –µ—â—ë –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–º–∏

```JS
import { createAction, nanoid } from '@reduxjs/toolkit'

const addTodo = createAction('todos/add', function prepare(text) {
  return {
    payload: {
      text,
      id: nanoid(),
      createdAt: new Date().toISOString(),
    },
  }
})
```

> –¢—É—Ç —Ç–∞–∫ –∂–µ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤ **RTK** –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `nanoid`, –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –æ–±—ä–µ–∫—Ç–∞

### Redux Toolkit `createReducer()`

–§—É–Ω–∫—Ü–∏—è `reducer` –∑–∞—á–∞—Å—Ç—É—é –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –±–ª–æ–∫–æ–≤ `switch-case` –∏ –º–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –≥–ª—É–±–∏–Ω–µ, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è `reducer` –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createReducer`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è:
- –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `builder`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å `reducer` –∑–∞ —Å—á—ë—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≤ –Ω–µ–≥–æ —Ç—Ä—ë—Ö —Ñ—É–Ω–∫—Ü–∏–π

`builder` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏:
- `addCase` - –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–µ–π—Å –≤ —Å–≤–∏—Ç—á–µ—Ä —Ä–µ–¥—å—é—Å–µ—Ä–∞
- `addDefaultCase` - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–µ–π—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `addMatcher` - –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —ç–∫—à–µ–Ω—ã

–ò —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—à–µ–≥–æ —Ä–µ–¥—å—é—Å–µ—Ä–∞ –≥–µ—Ä–æ–µ–≤ —á–µ—Ä–µ–∑ `createReducer`:

`reducers > heroes.js`
```JS
import { createReducer } from '@reduxjs/toolkit';

import {
	heroesFetching,
	heroesFetched,
	heroesFetchingError,
	heroCreated,
	heroDeleted,
} from '../actions';

const initialState = {
	heroes: [],
	heroesLoadingStatus: 'idle',
};

export const heroes = createReducer(initialState, (builder) => {
	// –≤—ã–∑—ã–≤–∞–µ–º –æ–±—ä–µ–∫—Ç –±–∏–ª–¥–µ—Ä–∞
	builder
		// —Å–æ–∑–¥–∞—ë–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–µ–π—Å –∫–∞–∫ –≤ switch-case
		.addCase(
			// action –∫–µ–π—Å–∞
			heroesFetching,
			// reducer
			(state, action) => {
				// –º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é
				state.heroesLoadingStatus = 'loading';
			},
		)
		.addCase(heroesFetched, (state, action) => {
			state.heroes = action.payload;
			state.heroesLoadingStatus = 'idle';
		})
		.addCase(heroesFetchingError, (state, action) => {
			state.heroesLoadingStatus = 'error';
		})
		.addCase(heroCreated, (state, action) => {
			state.heroes.push(action.payload);
		})
		.addCase(heroDeleted, (state, action) => {
			state.heroes = state.heroes.filter((item) => item.id !== action.payload);
		})
		.addDefaultCase(() => {});
});
```

> –¢–∞–∫ –∂–µ –Ω—É–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π `builder` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `ImmerJS`, –∫–æ—Ç–æ—Ä–∞—è —Å–∞–º–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ. –¢–æ –µ—Å—Ç—å –º—ã –º–æ–∂–µ–º –ø–∏—Å–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–æ–µ–∫—Ç —Å –º—É—Ç–∞—Ü–∏—è–º–∏, –∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–∞–º–∞ –ø–µ—Ä–µ–≤–µ–¥—ë—Ç –∫–æ–¥ –≤ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏.
> –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ä–æ–≤–Ω–æ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ `return`

–û–¥–Ω–∞–∫–æ —Ñ—É–Ω–∫—Ü–∏—è `createReducer` —Ç—Ä–µ–±—É–µ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã, —á—Ç–æ–±—ã –≤—Å–µ —ç–∫—à–µ–Ω—ã –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é `createAction`

`actions > index.js`
```JS
import { createAction } from '@reduxjs/toolkit';

export const fetchHeroes = (request) => (dispatch) => {
	dispatch(heroesFetching());
	request('http://localhost:3001/heroes')
		.then((data) => dispatch(heroesFetched(data)))
		.catch(() => dispatch(heroesFetchingError()));
};

export const heroesFetching = createAction('HEROES_FETCHING');
export const heroesFetched = createAction('HEROES_FETCHED');
export const heroesFetchingError = createAction('HEROES_FETCHING_ERROR');
export const heroCreated = createAction('HERO_CREATED');
export const heroDeleted = createAction('HERO_DELETED');
```

–¢–∞–∫ –∂–µ —É –Ω–∞—Å –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç. –¢–∞–∫–æ–π —Å–ø–æ—Å–æ–± —É–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å TS.

`reducers > heroes.js`
```JS
export const heroes = createReducer(
	// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
	initialState,
	// –∫–∞—Ä—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π (–∫–µ–π—Å—ã)
	{
		[heroesFetching]: (state) => {
			state.heroesLoadingStatus = 'loading';
		},
		[heroesFetched]: (state, action) => {
			state.heroes = action.payload;
			state.heroesLoadingStatus = 'idle';
		},
		[heroesFetchingError]: (state, action) => {
			state.heroesLoadingStatus = 'error';
		},
		[heroCreated]: (state, action) => {
			state.heroes.push(action.payload);
		},
		[heroDeleted]: (state, action) => {
			state.heroes = state.heroes.filter((item) => item.id !== action.payload);
		},
	},
	// –º–∞—Å—Å–∏–≤ —Ñ—É–Ω–∫—Ü–∏–π —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
	[],
	// –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
	() => {},
);
```

### Redux Toolkit `createSlice()`

- –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `createAction` –∏ `createReducer` –≤ –æ–¥–Ω–æ
- –û–±—ã—á–Ω–æ –æ–Ω–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å —Ñ–∞–π–ª–æ–º, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω–∞ –∏ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è
- –í –∫–æ–Ω–µ—Ü –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –æ–±—ã—á–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—É—Ñ—Ñ–∏–∫—Å `Slice` 

–§—É–Ω–∫—Ü–∏—è `createSlice` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è 4 –∞—Ä–≥—É–º–µ–Ω—Ç–∞:
- `name` - –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∏–º—è —Å—Ä–µ–∑–∞). –≠—Ç–æ –∏–º—è *–±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –¥–ª—è –≤—Å–µ—Ö –∏–º—ë–Ω —ç–∫—à–µ–Ω–æ–≤*, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ `reducers`
- `initialState` - –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `reducers` - –æ–±—ä–µ–∫—Ç —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
- `extraReducers` - –æ–±—ä–µ–∫—Ç —Å —Ä–µ–¥—å—é—Å–µ—Ä–∞–º–∏ –¥—Ä—É–≥–æ–≥–æ —Å—Ä–µ–∑–∞ (–æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞, –æ—Ç–Ω–æ—Å—è—â–µ–≥–æ—Å—è –∫ –¥—Ä—É–≥–æ–º—É —Å–ª–∞–π—Å—É)

–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ç—É—Ç –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å—Ä–µ–∑ `actionCreators` –∏ `reducer` –¥–ª—è –≥–µ—Ä–æ–µ–≤ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ —Ä—è–¥–æ–º —Å —Å–∞–º–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º 

`components > heroesList > HeroesList.js`
```JS
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
	heroes: [],
	heroesLoadingStatus: 'idle',
};

const heroesSlice = createSlice({
	// –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤—Å–µ —ç–∫—à–µ–Ω—ã
	name: 'heroes',
	// –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
	initialState,
	reducers: {
		// —Å–≤–æ–π—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–∫—à–µ–Ω
		// –∞ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä–∞
		heroesFetching: (state) => {
			state.heroesLoadingStatus = 'loading';
		},
		heroesFetched: (state, action) => {
			state.heroes = action.payload;
			state.heroesLoadingStatus = 'idle';
		},
		heroesFetchingError: (state, action) => {
			state.heroesLoadingStatus = 'error';
		},
		heroCreated: (state, action) => {
			state.heroes.push(action.payload);
		},
		heroDeleted: (state, action) => {
			state.heroes = state.heroes.filter((item) => item.id !== action.payload);
		},
	},
});

const { actions, reducer } = heroesSlice;

export const { heroCreated, heroDeleted, heroesFetched, heroesFetchingError, heroesFetching } =
	actions;
export default reducer;
```

–ò –¥–∞–ª–µ–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—à `reducer` –≤ `store`

`store > index.js`
```JS
import heroes from '../components/heroesList/heroesSlice';

const store = configureStore({
	reducer: { heroes, filters },
	devTools: process.env.NODE_ENV === 'development',
	middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(stringMiddleware),
});
```

–¢–µ–ø–µ—Ä—å –≤—Å—ë —Ç–æ, —á—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ `actionCreators` –≥–µ—Ä–æ–µ–≤ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞ —ç–∫—à–µ–Ω–æ–≤ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ `fetchHeroes`

`actions > index.js`
```JS
import {
	heroCreated,
	heroDeleted,
	heroesFetched,
	heroesFetchingError,
	heroesFetching,
} from '../components/heroesList/heroesSlice';

export const fetchHeroes = (request) => (dispatch) => {
	dispatch(heroesFetching());
	request('http://localhost:3001/heroes')
		.then((data) => dispatch(heroesFetched(data)))
		.catch(() => dispatch(heroesFetchingError()));
};

/// CODE ...
```

–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `HeroesList` –∏ –≤ `HeroesAddForm`

–ò —Ç–µ–ø–µ—Ä—å –º—ã –∏–º–µ–µ–º —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –ø–µ—Ä–µ–ø–∏—Å–∞–ª–∏ –Ω–∞ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–æ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ.

–û–¥–Ω–∞–∫–æ —Ç—É—Ç —Å—Ç–æ–∏—Ç —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –Ω–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è –±—ã–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –ø–æ–¥ –æ–±—Ä–∞–∑ `createSlice`, –≥–¥–µ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —ç–∫—à–µ–Ω–æ–º (`heroes`) –∏ —Å–∞–º `actionCreator` (`heroesFetching`) 

![](_png/928c9f86e25941eb218bc5527a83b9d6.png)

–ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏—Ç—å, –Ω–æ –∏ –æ–±–æ–≥–∞—Ç–∏—Ç—å `payload`, —Ç–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —ç–∫—à–µ–Ω –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞:
- `reducer` - —ç—Ç–æ —Å–∞–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- `prepare` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ–≥–∞—â–∞–µ—Ç `payload`

```JS
import { createSlice, nanoid } from '@reduxjs/toolkit'

const todosSlice = createSlice({
  name: 'todos',
  initialState: [],
  reducers: {
    addTodo: {
      // —ç—Ç–æ —Ç–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—â–∞–µ–º –≤ —ç–∫—à–µ–Ω
      // —Ç—É—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º –∏ —Å—Ç–µ–π—Ç –∏ —ç–∫—à–µ–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ payload
      reducer: (state, action) => {
        state.push(action.payload)
      },
      // –∞ —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∞–º–æ–≥–æ payload
      prepare: (text) => {
        const id = nanoid()
        return { payload: { id, text } }
      },
    },
  },
})
```

–ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–µ–π—Ç —É–∂–µ –≤ –¥—Ä—É–≥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏–∑ –Ω–∞—à–µ–≥–æ, —Ç–æ –º—ã –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —ç—Ç–æ–≥–æ `extraReducers`

```JS
import { createAction, createSlice } from '@reduxjs/toolkit'
import { incrementBy, decrement } from './actions'

function isRejectedAction(action) {
  return action.type.endsWith('rejected')
}

createSlice({
  name: 'counter',
  initialState: 0,
  reducers: {},
  extraReducers: (builder) => {
    builder
      .addCase(incrementBy, (state, action) => {
      })
      .addCase(decrement, (state, action) => {})
      .addMatcher(
        isRejectedAction,
        (state, action) => {}
      )
      .addDefaultCase((state, action) => {})
  },
})
```

### Redux Toolkit `createAsyncThunk()`

–§—É–Ω–∫—Ü–∏—è `createAsyncThunk()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `actionCreator`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è —Ä–æ–≤–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±—ã—á–Ω–æ–≥–æ `redux-thunk`. 
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ —Ç–∞–∫–æ–º –∑–∞–ø—Ä–æ—Å–µ `heroes/fetchHeroes` —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–º —Ç—Ä–∏ —ç–∫—à–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–µ–ª–µ–Ω—ã –Ω–∞:
-   `pending`:¬†`'heroes/fetchHeroes/pending'`
-   `fulfilled`:¬†`'heroes/fetchHeroes/fulfilled'`
-   `rejected`:¬†`'heroes/fetchHeroes/rejected'`
–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –∞ –ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç—É–ª–∫–∏—Ç–∞.

> –¢—É—Ç –Ω—É–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∏–∑ –¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –º—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Promise`, –∫–æ—Ç–æ—Ä—ã–π —Ñ—É–Ω–∫—Ü–∏—è —Å–∞–º–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Ç—Ä—ë–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º

–°–∞–º `reducer`, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–æ–∑–¥–∞–ª–∏ —á–µ—Ä–µ–∑ `createAsyncThunk` –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π `reducer` —É–∂–µ –∫–∞–∫ —á–µ—Ç–≤—ë—Ä—Ç—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç - –æ–±—ä–µ–∫—Ç `extraReducers`

–¢—É—Ç –º—ã —Å–æ–∑–¥–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é `fetchHeroes`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–º–µ–Ω–∏—Ç `fetchHeroes` –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ `actions`. –î–∞–ª–µ–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è `fetchHeroes` —É–∂–µ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ `heroesSlice`, –ø–µ—Ä–µ–¥–∞–≤ –≤–Ω—É—Ç—Ä—å `extraReducers`

`components > heroesList > heroesSlice.js``
```JS
import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';
import { useHttp } from '../../hooks/http.hook';

const initialState = {
	heroes: [],
	heroesLoadingStatus: 'idle',
};

export const fetchHeroes = createAsyncThunk(
	// –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ä–µ–∑–∞ / —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
	'heroes/fetchHeroes',
	// –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
	// 1 –∞—Ä–≥ - —Ç–æ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–∏—Å–ø–µ—Ç—á–µ
	// 2 –∞—Ä–≥ - thunkAPI (dispatch, getState)
	async () => {
		const { request } = useHttp();
		return await request('http://localhost:3001/heroes');
	},
);

const heroesSlice = createSlice({
	name: 'heroes',
	initialState,
	reducers: {
		// –∞ —Ç—É—Ç –º—ã —É–¥–∞–ª–∏–º heroesFetching, heroesFetched, heroesFetchingError, —Ç–∞–∫ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –≤ fetchHeroes
		heroCreated: (state, action) => {
			state.heroes.push(action.payload);
		},
		heroDeleted: (state, action) => {
			state.heroes = state.heroes.filter((item) => item.id !== action.payload);
		},
	},
	extraReducers: (builder) => {
		builder
			// –¥–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
			.addCase(fetchHeroes.pending, (state) => {
				state.heroesLoadingStatus = 'loading'; // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
			})
			// –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω
			.addCase(fetchHeroes.fulfilled, (state, action) => {
				state.heroes = action.payload; // –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–ø–∞–¥—É—Ç —Å—é–¥–∞
				state.heroesLoadingStatus = 'idle'; // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è
			})
			// –∑–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω—ë–Ω
			.addCase(fetchHeroes.rejected, (state, action) => {
				state.heroesLoadingStatus = 'error'; //
			});
	},
});

const { actions, reducer } = heroesSlice;

export const { heroCreated, heroDeleted, heroesFetched, heroesFetchingError, heroesFetching } =
	actions;
export default reducer;
```

–¢–µ–ø–µ—Ä—å —Ç—É—Ç –º–µ–Ω—è–µ–º –∏–º–ø–æ—Ä—Ç—ã

`components > heroesList > HeroesList.js`
```JS
import { heroDeleted, fetchHeroes } from './heroesSlice';
```

–ù—É –∏ —Ç–∞–∫ –∂–µ –∏–∑ –Ω–∞—à–µ–≥–æ —Ö—É–∫–∞ `useHttp` –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å `useCallback`, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–µ

![](_png/f5e8735862a0aa71845b3d2e6429623e.png)

```JS
export const useHttp = () => {
	// —É–±—Ä–∞—Ç—å useCallback
	const request = async (
		url,
		method = 'GET',
		body = null,
		headers = { 'Content-Type': 'application/json' },
	) => {
		try {
			const response = await fetch(url, { method, body, headers });

			if (!response.ok) {
				throw new Error(`Could not fetch ${url}, status: ${response.status}`);
			}

			const data = await response.json();

			return data;
		} catch (e) {
			throw e;
		}
	};

	return {
		request,
	};
};
```

–ò —Ç–µ–ø–µ—Ä—å –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞ –Ω–∞—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∞ —Å—Ä–∞–∑—É —Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–µ–π—Ç–∞

![](_png/a2aa6d12a19cd056d81681593c930c3c.png)

### Redux Toolkit `createEntityAdapter()`

–§—É–Ω–∫—Ü–∏—è `createEntityAdapter()` –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å —á–∞—Å—Ç–æ-–≤—ã–ø–æ–ª–Ω—è–µ–º—ã–º–∏ CRUD-–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ `reducer`

–í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –≤ —Ñ–∞–π–ª–µ —Å–æ —Å–ª–∞–π—Å–æ–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∞–º –∞–¥–∞–ø—Ç–µ—Ä –∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ `initialState` –ø–æ–¥ –∞–¥–∞–ø—Ç–µ—Ä

–¢–∞–∫ –∂–µ –º—ã –º–æ–∂–µ–º –≤–Ω—É—Ç—Ä—å –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤–ª–æ–∂–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –Ω–µ —Ö–æ—Ç–∏–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–≥–æ (`heroesLoadingStatus`), –∞ —Ö–æ—Ç–∏–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

`components > heroesList > heroesSlice.js`
```JS
// —Å–æ–∑–¥–∞—ë–º –∞–¥–∞–ø—Ç–µ—Ä
const heroesAdapter = createEntityAdapter();

// —Å–æ–∑–¥–∞—ë–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState = heroesAdapter.getInitialState({
	heroesLoadingStatus: 'idle',
});
```

–ï—Å–ª–∏ –≤—ã–≤–µ—Å—Ç–∏ –∞–¥–∞–ø—Ç–µ—Ä –≤ –∫–æ–Ω—Å–æ–ª—å, —Ç–æ –æ–Ω –±—É–¥–µ—Ç –∏–º–µ—Ç—å –≤ —Å–µ–±–µ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –ø–æ–ø–∞–¥–∞—é—â–∏–µ –≤–Ω—É—Ç—Ä—å –Ω–µ–≥–æ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã. –¢–∞–∫ –∂–µ –æ–Ω –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—Å–µ —Ç–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –∫–∞–∫ –æ–±—ä–µ–∫—Ç –≤–Ω—É—Ç—Ä—å –∞–¥–∞–ø—Ç–µ—Ä–∞ - —É–∂–µ —Å –Ω–∏–º–∏ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –±–µ–∑ –∫—Ä—É–¥-—Ñ—É–Ω–∫—Ü–∏–π –∞–¥–∞–ø—Ç–µ—Ä–∞

![](_png/a75f75aecfb62a2c77cf2737ba445232.png)

–¢–∞–∫ –∂–µ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `createEntityAdapter` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –æ–±—ä–µ–∫—Ç —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π 

```JS
const booksAdapter = createEntityAdapter({
  // —Ç—É—Ç –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –±—É–¥–µ–º –±—Ä–∞—Ç—å id –Ω–µ –∏–∑ book.id, –∞ –∏–∑ book.bookId
  selectId: (book) => book.bookId,
  // —Ç—É—Ç –º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –≤—Å–µ—Ö –∫–Ω–∏–≥ –ø–æ —Ç–∞–π—Ç–ª–∞–º
  sortComparer: (a, b) => a.title.localeCompare(b.title),
})
```

CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `createEntityAdapter`:

-   `addOne`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ, –µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
-   `addMany`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç –≤ —Ñ–æ—Ä–º–µ¬†`Record<EntityId, T>`¬†–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Ö, –µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ –Ω–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç.
-   `setOne`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–ª–∏ –∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ
-   `setMany`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç –≤ —Ñ–æ—Ä–º–µ¬†`Record<EntityId, T>`¬†–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–ª–∏ –∑–∞–º–µ–Ω—è–µ—Ç –∏—Ö.
-   `setAll`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–ª–∏ –æ–±—ä–µ–∫—Ç –≤ —Ñ–æ—Ä–º–µ¬†`Record<EntityId, T>`¬†–∏ –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ –º–∞—Å—Å–∏–≤–µ.
-   `removeOne`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ –∏ —É–¥–∞–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç —Å —ç—Ç–∏–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º, –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
-   `removeMany`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ –∏ —É–¥–∞–ª—è–µ—Ç –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Å —ç—Ç–∏–º–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.
-   `removeAll`: —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–∏.
-   `updateOne`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç "–æ–±—ä–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è", —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, –∏ –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –æ–¥–Ω–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏¬†`changes`¬†–ø–æ–ª—è, –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
-   `updateMany`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–µ–ª–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
-   `upsertOne`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–¥–∏–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å.¬†–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —Å —Ç–∞–∫–∏–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∏ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è –±—É–¥—É—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç, –∞ –ª—é–±—ã–µ —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ –ø–æ–ª—è –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.¬†–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω.
-   `upsertMany`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –æ–±—ä–µ–∫—Ç –≤ —Ñ–æ—Ä–º–µ`Record<EntityId, T>`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–ª–µ–≥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω.

> –í—Å–µ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö**. –û–Ω–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º, –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç/–Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç

–†–µ–∞–ª–∏–∑—É–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –º–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –º–æ–∂–µ—Ç –ø–æ–¥–æ–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—è `setAll`, –≤ –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è –º–µ—Å—Ç–æ–º, –∫—É–¥–∞ –ø–æ–º–µ—â–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –∞ –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–º–µ—â–µ–Ω–∏—è.

`components > heroesList > heroesSlice.js`
```JS
const heroesSlice = createSlice({
	name: 'heroes',
	initialState,
	reducers: {
		heroCreated: (state, action) => {
			state.heroes.push(action.payload);
		},
		heroDeleted: (state, action) => {
			state.heroes = state.heroes.filter((item) => item.id !== action.payload);
		},
	},
	extraReducers: (builder) => {
		builder
			.addCase(fetchHeroes.pending, (state) => {
				state.heroesLoadingStatus = 'loading';
			})
			.addCase(fetchHeroes.fulfilled, (state, action) => {
				state.heroesLoadingStatus = 'idle';
				// —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç–µ–π—Ç
				// –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç - –º–µ—Å—Ç–æ, –∫—É–¥–∞ –ø–æ–º–µ—â–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
				// –≤—Ç–æ—Ä–æ–π - —á—Ç–æ –ø–æ–º–µ—â–∞–µ–º
				heroesAdapter.setAll(state, action.payload); // state.heroes = action.payload;
			})
			.addCase(fetchHeroes.rejected, (state, action) => {
				state.heroesLoadingStatus = 'error';
			});
	},
});
```

–í—Å–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø–æ–º–µ—â–∞–µ–º –≤ —Å—Ç–µ–π—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç `entities`

![](_png/838dba72d7e496e5a9eac9a666c22523.png)

–ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º –∏ –ø–æ–ª—É—á–∞—Ç—å –∏–∑ –Ω–µ–≥–æ –Ω—É–∂–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏, –Ω—É–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –≤—ã–±–æ—Ä–∞. –ê–¥–∞–ø—Ç–µ—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥ `getSelectors()`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ —É–∂–µ –∑–Ω–∞—é—â–∏—Ö –∫–∞–∫ —Å—á–∏—Ç—ã–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–π —Å—É—â–Ω–æ—Å—Ç–∏:

-   `selectIds`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†–º–∞—Å—Å–∏–≤ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ `state.ids`.
-   `selectEntities`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†–æ–±—ä–µ–∫—Ç `state.entities`.
-   `selectAll`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏¬†`state.ids`.
-   `selectTotal`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã—Ö –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
-   `selectById`: —É—á–∏—Ç—ã–≤–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å —ç—Ç–∏–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –∏–ª–∏¬†`undefined`.

–ï—Å–ª–∏ –º—ã –∏—Å–ø–æ–ª—å–∑–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏–≤–∏–¥–∏–º–æ—Å—Ç–∏, —Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å, —Å —á–µ–º –∏–º–µ–Ω–Ω–æ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

```JS
const store = configureStore({
  reducer: {
    books: booksReducer,
  },
})

const simpleSelectors = booksAdapter.getSelectors()
const globalizedSelectors = booksAdapter.getSelectors((state) => state.books)

// —É–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä
const bookIds = simpleSelectors.selectIds(store.getState().books)

// —É–∂–µ —ç—Ç–æ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä –∑–Ω–∞–µ—Ç, —Å –∫–∞–∫–∏–º –æ–±—ä–µ–∫—Ç–æ–º –≤ —Å—Ç–µ–π—Ç–µ –æ–Ω –∏–º–µ–µ—Ç –¥–µ–ª–æ
const allBooks = globalizedSelectors.selectAll(store.getState())
```

–ò —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—é –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ —Å—Ç–µ–π—Ç–∞. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –ª–µ–≥–∫–æ - –º—ã –ø—Ä–æ—Å—Ç–æ –∏–∑ —Ñ–∞–π–ª–∞ —Å–æ —Å–ª–∞–π—Å–æ–º –±—É–¥–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `selectAll`, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–∏–≤—è–∂–µ–º –∫ `state.heroes`

`components > heroesList > heroesSlice.js`
```JS
// –∏ —Ç–µ–ø–µ—Ä—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ —Å—Ç–µ–π—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º, –±—É–¥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –≥–µ—Ä–æ—è–º
export const { selectAll } = heroesAdapter.getSelectors((state) => state.heroes);
```

–í—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ –ª–∏—Å—Ç–µ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ —Å –ø–æ–º–æ—â—å—é –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π. –¢–µ–ø–µ—Ä—å –∂–µ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏-—Å–µ–ª–µ–∫—Ç–æ—Ä–∞ 

![](_png/3b1dcbbe9d3115bc569138e3d10f890a.png)

–ò —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç –ø–æ–ø–∞–¥–∞–µ—Ç —Ç–æ—Ç –º–∞—Å—Å–∏–≤, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–º –∏ –±—ã–ª –Ω—É–∂–µ–Ω

![](_png/4fe429e457b0b096433ae22a082492f3.png)

–ï—Å–ª–∏ –º—ã –ø–æ–ø—ã—Ç–∞–µ–º—Å—è –≤—ã–≤–µ—Å—Ç–∏ –º–∞—Å—Å–∏–≤ —Å –ª–æ–≥–∞–º–∏ –æ –≥–µ—Ä–æ—è—Ö, —Ç–æ —Ç—É—Ç –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –≤ –ø–µ—Ä–≤—ã–µ –¥–≤–µ —Å–º–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—ã–ª–∏ –ø—É—Å—Ç—ã–µ, –Ω–æ –¥–∞–ª—å—à–µ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –º–∞—Å—Å–∏–≤ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏

![](_png/b5f6eee8d55d775765e6641d7ce884cb.png)

–ò —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç–µ–π—Ç–∞ –Ω–∞ –∫—Ä—É–¥-–æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ —Å–∞–º–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞. 

–¢—É—Ç –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ `reducer`, –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º—ë–Ω `heroes`, –±—É–¥—É—Ç –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ `state.entities.heroes`. –û–¥–Ω–∞–∫–æ –Ω–∞–ø—Ä—è–º—É—é —Å –Ω–∏–º–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –º—ã –∏—Ö –º–æ–∂–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç–∞—Ç—å —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã

![](_png/d7ca6c837f83da2fb7a80ca60a94c84f.png)

–ù—É –∏ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `Reselect`) —É–∂–µ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ —Å–ª–∞–π—Å–∞

![](_png/d1e56a6b02d41a3f5baabb4c5d9b0849.png)

![](_png/9665f64d38892294cbf40dd93bf30f3b.png)


>[!success] –í—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ==Redux== –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Å–∫—Ä—ã–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫—É—é —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç —Å–∞–º–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç. –¢–µ–ø–µ—Ä—å ==View== —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –∏ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.


## 024 Redux Toolkit RTK Query


RTK Qeury –∏ React Query –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –º–µ–Ω—è—é—Ç –ø–æ–¥—Ö–æ–¥ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –û–Ω–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

–°–µ–π—á–∞—Å –Ω–∞—à–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
- –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Å—Ç–µ–π—Ç

![](_png/706e2ba2e0a4288f02cb4f0c3f2112ea.png)

–î–∞–ª–µ–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Query:
- `createApi` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ RTK Query
- `fetchBaseQuery` - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `fetch()`

–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –±—É–¥—É—â–µ–µ –ê–ü–ò –æ–±—â–µ–Ω–∏—è —Å RTK Query:
- –ü–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é `createApi`, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∏ –ø–µ—Ä–µ–¥–∞—ë–º –≤ –Ω–µ—ë –æ–±—ä–µ–∫—Ç
	- `reducerPath` –±—É–¥–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
	- `baseQuery` –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
		- —Ñ—É–Ω–∫—Ü–∏—è `fetchBaseQuery` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Ñ–µ—Ç—á–∞, –Ω–æ —Ö—Ä–∞–Ω–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä—Ç–∫
		- `baseUrl` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
	- `endpoints` —Ö—Ä–∞–Ω–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å —Ç–µ–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, —á—Ç–æ –º—ã –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å
		- —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–∞ –±—É–¥–µ—Ç –≤—Ö–æ–¥–∏—Ç—å –≤ –∏–º—è —Ö—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω. –ï—Å–ª–∏ –º—ã –∏–º–µ–µ–º –∏–º—è `getHeroes`, —Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ö—É–∫ `useGetHeroes[Query/Mutation]` (—Å—É—Ñ—Ñ–∏–∫—Å —É–∂–µ –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Ç–∏–ø–∞ —Ç–æ–≥–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ö—É–∫ - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –º—É—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)

`api > apiSlice.js`
```JS
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

// —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ö—É–∫–∏ (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã) –Ω–∞ –∫–∞–∂–¥–æ–µ –Ω–∞—à–µ –¥–µ–π—Å—Ç–≤–∏–µ
// —Ç–∞–∫ –∂–µ –æ–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ —Ä–µ–¥—å—é—Å–µ—Ä (–∫–∞–∫ createSlice)
export const apiSlice = createApi({
	// –ø—É—Ç—å –∫ —Ä–µ–¥—å—é—Å–µ—Ä—É
	reducerPath: 'api',
	// —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
	baseQuery: fetchBaseQuery({
		// —Ç—É—Ç —É–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
		baseUrl: 'http://localhost:3001',
	}),
	// —Ç—É—Ç —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ–º –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø–æ –±–∞–∑–æ–≤–æ–º—É –∞–¥—Ä–µ—Å—É (–ø–æ–ª—É—á–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
	// query - –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∏—Ö
	// mutation - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
	endpoints: (builder) => ({
		// —Ç—É—Ç –º—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –≥–µ—Ä–æ–µ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
		getHeroes: builder.query({
			query: () => '/heroes',
		}),
	}),
});

export const { useGetHeroesQuery } = apiSlice;
```

–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:
- —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π reduce, –Ω—É–∂–Ω–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–≤–æ–π—Å—Ç–≤–∞ —É–∫–∞–∑–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Å—Ç—Ä–æ–∫—É `apiSlice.reducerPath` –∏ —É–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∞–º–æ–≥–æ —Ä–µ–¥—å—é—Å–µ—Ä–∞ `apiSlice.reducer`
- –¥–∞–ª–µ–µ –¥–æ–±–∞–≤–ª—è–µ–º `middleware` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ RTK Query

`store > index.js`
```JS
import { apiSlice } from '../api/apiSlice';

const store = configureStore({
	reducer: { 
		heroes, 
		filters, 
		// –¥–æ–±–∞–≤–ª—è–µ–º reducer, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ RTK Query
		[apiSlice.reducerPath]: apiSlice.reducer 
	},
	devTools: process.env.NODE_ENV === 'development',
	middleware: (getDefaultMiddleware) =>
		getDefaultMiddleware().concat(
			stringMiddleware, 
			// –ø–µ—Ä–µ–¥–∞—ë–º —Å—é–¥–∞ middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ RTK Query
			apiSlice.middleware
		),
});
```

–ò —É–∂–µ —Ç—É—Ç –º—ã –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ö—É–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª Query. –ß–µ—Ä–µ–∑ —Ö—É–∫ `useGetHeroesQuery` –º—ã –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏—Å–≤–æ–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞

> –¢–∞–∫ –∂–µ –Ω—É–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥—É—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è

`components > heroesList > HeroesList.js`
```JS
import { heroDeleted, fetchHeroes, filteredHeroesSelector } from './heroesSlice';
import { useGetHeroesQuery } from '../../api/apiSlice';

const HeroesList = () => {
	const {
		// —Ç—É—Ç –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥
		data: heroes = [], // –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—à–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é heroes
		isUninitialized, // –µ—Å–ª–∏ true, —Ç–æ –∑–∞–ø—Ä–æ—Å –≤–æ–æ–±—â–µ –Ω–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
		isFetching, // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
		isLoading, // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
		isError, // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–∫–∏
		error, // –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –æ—à–∏–±–∫–æ–π
	} = useGetHeroesQuery();

	// –ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ñ–∏–ª—å—Ç—Ä—É
	const activeFilter = useSelector((state) => state.filters.activeFilter);

	// —ç—Ç–æ —Ñ–∏–ª—å—Ç—Ä –≥–µ—Ä–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –ø–æ–ª—É—á–∏–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
	const filteredHeroes = useMemo(() => {
		// —Å–æ–∑–¥–∞—ë–º –∫–æ–ø–∏—é –º–∞—Å—Å–∏–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
		const filteredHeroes = heroes.slice();

		if (activeFilter === 'all') {
			return filteredHeroes;
		} else {
			return filteredHeroes.filter((item) => item.element === activeFilter);
		}
	}, [heroes, activeFilter]);

	/// CODE ...

	if (isLoading) {
		return <Spinner />;
	} else if (isError) {
		return <h5 className='text-center mt-5'>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>;
	}

	/// CODE ...

	// –∏ —Å—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π  
	const elements = renderHeroesList(filteredHeroes);
	return <TransitionGroup component='ul'>{elements}</TransitionGroup>;
};

export default HeroesList;
```

–ò –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π - —Å–ø–∏—Å–æ–∫ –≥–µ—Ä–æ–µ–≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞

![](_png/536f36b1b7120d7201d86593d4237fe5.png)

–î–∞–ª–µ–µ –¥–æ–±–∞–≤–∏–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –º—É—Ç–∞—Ü–∏—é —Å—Ç–µ–π—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ —Å–ø–∏—Å–æ–∫

`api > apiSlice.js`
```JS
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export const apiSlice = createApi({
	reducerPath: 'api',
	baseQuery: fetchBaseQuery({
		baseUrl: 'http://localhost:3001',
	}),
	endpoints: (builder) => ({
		getHeroes: builder.query({
			query: () => '/heroes',
		}),
		createHero: builder.mutation({
			query: (hero) => ({
				url: '/heroes',
				method: 'POST',
				body: hero,
			}),
		}),
	}),
});

export const { useGetHeroesQuery, useCreateHeroMutation } = apiSlice;
```

–ò –¥–∞–ª–µ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–π —Ö—É–∫ –º—É—Ç–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ:
- —Ö—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤:
	- —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –º—É—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
	- –æ–±—ä–µ–∫—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (—Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç, —á—Ç–æ –∏ —É `query`)
- –¥–∞–ª–µ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–µ—Ä–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –Ω–µ–≥–æ –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è
- –∏ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–æ–±—ä–µ–∫—Ç –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `unwrap()`

![](_png/5839c1ef0223fb5b458bc89e6855ce7b.png)

–û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –º—ã –Ω–µ –ø–æ–ª—É—á–∞–µ–º –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –Ω–∞—à–∏–º —Å–æ–∑–¥–∞–Ω–Ω—ã–º –≥–µ—Ä–æ–µ–º.

–ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é, –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à —Å—Ç–µ–π—Ç `api` –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–µ–π—Ç –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ, –∫–æ–≥–¥–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞

–ß—Ç–æ–±—ã –ø–æ–¥–≤—è–∑–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–¥–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥ –¥—Ä—É–≥–∏–µ, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–≥–∏ –≤ `createApi`

![](_png/418ea3c74724db6334644b6a86743e01.png)

–ò —Ç–µ–ø–µ—Ä—å —Ç—É—Ç –ø—Ä–∞–≤–∏–º —Å–∏—Ç—É–∞—Ü–∏—é:
- –æ–±—ä—è–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ –ê–ü–ò –ø–æ–ª–µ `tagTypes`, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –º–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏
- –¥–æ–±–∞–≤–ª—è–µ–º –≤ –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å `providesTags` –∏ —Ç–µ–≥, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç –æ–ø–æ–≤–µ—â–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –æ–Ω —Å—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∑–∞–ø—Ä–æ—Å –º—É—Ç–∞—Ü–∏–∏ `invalidatesTags`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–µ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å, –æ—Ç–∫—É–¥–∞ –Ω–∞ –≤—Å–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ —Ç–µ–≥–∞–º–∏ –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

`api > apiSlice.js`
```JS
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export const apiSlice = createApi({
	reducerPath: 'api',
	baseQuery: fetchBaseQuery({
		baseUrl: 'http://localhost:3001',
	}),
	// —Ç—É—Ç –º—ã –∑–∞–¥–∞—ë–º, –∫–∞–∫–∏–µ –º–µ—Ç–∫–∏ (—Ç–µ–≥–∏) —Å—É—â–µ—Å—Ç–≤—É—é—Ç
	tagTypes: ['Heroes'],
	endpoints: (builder) => ({
		getHeroes: builder.query({
			query: () => '/heroes',
			// —É–∫–∞–∑—ã–≤–∞–µ–º, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –æ–±—ã—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
			providesTags: ['Heroes'], // –∞ —Ç—É—Ç –º—ã –ø–æ–¥—Ü–µ–ø–ª—è–µ–º—Å—è –∫ —Ç–µ–≥–∞–º - —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è –æ—Ç —Ç–µ–≥–æ–≤
		}),
		createHero: builder.mutation({
			query: (hero) => ({
				url: '/heroes',
				method: 'POST',
				body: hero,
			}),
			// –µ—Å–ª–∏ –º—ã –º—É—Ç–∏—Ä–æ–≤–∞–ª–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, —Ç–æ –ø–æ –∫–∞–∫–æ–π –º–µ—Ç–∫–µ –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ
			invalidatesTags: ['Heroes'], // –∞ —Ç—É—Ç –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
		}),
	}),
});

export const { useGetHeroesQuery, useCreateHeroMutation } = apiSlice;
```

–ò —Ç–µ–ø–µ—Ä—å –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

![](_png/8a45a2d40886061b454479142418d1d5.png)




`api > apiSlice.js`
```JS
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

export const apiSlice = createApi({
	reducerPath: 'api',
	baseQuery: fetchBaseQuery({
		baseUrl: 'http://localhost:3001',
	}),
	tagTypes: ['Heroes'],
	endpoints: (builder) => ({
		getHeroes: builder.query({
			query: () => '/heroes',
			providesTags: ['Heroes'],
		}),
		createHero: builder.mutation({
			query: (hero) => ({
				url: '/heroes',
				method: 'POST',
				body: hero,
			}),
			invalidatesTags: ['Heroes'],
		}),
		deleteHero: builder.mutation({
			query: (id) => ({
				url: `/heroes/${id}`,
				method: 'DELETE',
			}),
			invalidatesTags: ['Heroes'],
		}),
	}),
});

export const { 
	useGetHeroesQuery, 
	useCreateHeroMutation, 
	useDeleteHeroMutation 
} = apiSlice;
```

![](_png/0ea8700404eb10bfbdfbac9a694ccaaf.png)

![](_png/4955ea8761d104fcf028b311ae19172e.png)

–ò –ø–æ –∏—Ç–æ–≥—É –º—ã —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å –≤–µ—Å—å `heroesSlice.js`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ 

–ò —Ç–µ–ø–µ—Ä—å —Å–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫–æ–º –æ–±—Ä–∞–∑–æ–º:

`components > heroesList > HeroesList.js`
```JS
import { useCallback, useMemo } from 'react';
import { useSelector } from 'react-redux';
import { CSSTransition, TransitionGroup } from 'react-transition-group';

import HeroesListItem from '../heroesListItem/HeroesListItem';
import Spinner from '../spinner/Spinner';

import './heroesList.scss';

import { useGetHeroesQuery, useDeleteHeroMutation } from '../../api/apiSlice';

const HeroesList = () => {
	const {
		data: heroes = [],
		isUninitialized,
		isFetching,
		isLoading,
		isError,
		error,
	} = useGetHeroesQuery();

	const activeFilter = useSelector((state) => state.filters.activeFilter);

	const filteredHeroes = useMemo(() => {
		const filteredHeroes = heroes.slice();

		if (activeFilter === 'all') {
			return filteredHeroes;
		} else {
			return filteredHeroes.filter((item) => item.element === activeFilter);
		}
	}, [heroes, activeFilter]);

	const [deleteHero] = useDeleteHeroMutation();

	const onDelete = useCallback((id) => {
		deleteHero(id);
	}, []);

	if (isLoading) {
		return <Spinner />;
	} else if (isError) {
		return <h5 className='text-center mt-5'>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h5>;
	}

	const renderHeroesList = (arr) => {
		if (arr.length === 0) {
			return (
				<CSSTransition timeout={0} classNames='hero'>
					<h5 className='text-center mt-5'>–ì–µ—Ä–æ–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
				</CSSTransition>
			);
		}

		return arr.map(({ id, ...props }) => {
			return (
				<CSSTransition key={id} timeout={500} classNames='hero'>
					<HeroesListItem {...props} onDelete={() => onDelete(id)} />
				</CSSTransition>
			);
		});
	};

	const elements = renderHeroesList(filteredHeroes);
	return <TransitionGroup component='ul'>{elements}</TransitionGroup>;
};

export default HeroesList;
```

>[!success] –ò —Å–µ–π—á–∞—Å –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–≤–æ–¥—ã:
> - RTK Query –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–∞–º –Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫–∏–º-–ª–∏–±–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º —Å —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö 
> - –í –±—Ä–∞—É–∑–µ—Ä–µ –∂–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (—Ç–æ –µ—Å—Ç—å —Ç–µ—Ö –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –≤ –Ω–∞—à–µ–º —Å—Ç–µ–π—Ç–µ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç - –æ–Ω–∏ –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞)
