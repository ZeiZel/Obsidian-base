

## Про процессы

Процесс - это программа, которая выполняется в ОС, взаимодействует с другими программами, делится на другие программы, взаимодействует с ОС, запрашивает у неё ресурсы - все эти явления являются процессом

Создаются во всех ОС процессы по-разному. Создание процесса в линуксе выполняется через полное его клонирование. Вызывается клонирование функцией `fork()`, которая передаётся в пространство ядра.

То есть, когда мы запускаем `uptime`, `fork` отправляет запрос в ядро, где клонируется `bash` (создаётся процесс-потом от `bash`) и в этом клоне запускается функция `exec()`, которая меняет код программы оболочки на код программы `uptime` (`bash` поменялся на `uptime`). Путь: `bash` -> `bash` + `bash` -> `bash` + `uptime`.
Далее `uptime` получает данные, выполняется и записывает результат на свой вывод. После этого он запускает системный вызов `exit()`, который уведомляет систему о том, что операция выполнена и процесс можно закрывать. Сам вызов передаёт идентификатор потомка и код возврата родителю этого дочернего процесса (0/1/и тд). Система закроет процесс, вернёт выделенную память, сотрёт процесс из таблицы процессов и пометит процесс завершённым. Если родитель проигнорировал возврат, то процесс останется в таблице процессов со статусом завершённого - такой процесс называется ==процессом зомби==.
Этот код взврата ждёт родитель процесса и специально для этого в начале дочернего процесса запускает системный вызов `wait()`, чтобы синхронизировать выполнение с момента завершения потомка (получает код возврата от дочернего процесса). После получения из системы код возврата родителем, родитель полностью удаляется из системы.

![](_png/Pasted%20image%2020240808190146.png)

Все процессы находятся в папке `/proc/`. Чтобы посчитать количество процессов, можно посчитать количество записей в папке через `wc -l`

Поменять владельца процесса - нельзя. 

![](_png/Pasted%20image%2020240808191351.png)



## Создание службы 













## Инструменты systemd 























