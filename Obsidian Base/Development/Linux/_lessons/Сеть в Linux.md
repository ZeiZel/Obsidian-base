
## Основы сети

Представим ситуацию, когда у нас два компьютера подключены к сети через коммутатор и у обоих хостов назначены свои адреса. В таком случае, мы сможем пингануться от одного устройства к другому и проверить их на взаимодействие внутри сети.

==Коммутатор (switch)== позволяет соединить два хоста в одну сеть.

![](_png/Pasted%20image%2020240721170346.png)

Далее нам нужно подключить две разных сети, чтобы они могли обмениваться данными. Для этого нам нужен будет ==маршрутизатор (router)==. Он занимается объединением нескольких сетей в одну. Представляет он из себя сервер с множеством сетевых портов.

Поскольку он подключён к двум сетям, *ему назначают по одному адресу от каждой сети*.

Чтобы попасть в эту сеть к маршрутизатору извне используется ==Шлюз (aka Gateway)==, который и является дверью во внешний мир. 

Команда `route` представляет нам информацию по сетям, доступную ядру линукса.

Команда `ip route add 192.168.2.0/24 via 192.168.1.1` откроет нам доступ к сети `192.168.2.0` через роутер `192.168.1.1`

![](_png/Pasted%20image%2020240721171549.png)

Чтобы настроить возможность отправить пакеты с *системы4* на *систему2*, нам нужно будет так же настроить доступ к маршрутизатору на данных машинах.

(первая команда связывает верхнюю сеть коммутатора с маршрутизатором)

(вторая команда выполняет подключение к гуглу второй сети через маршрутизатор)

(третья команда подставляет ==дефолтный (default aka 0.0.0.0)==, т.е. любой ip-адрес назначения, на которой полетит потом запрос, если не будет найден искомый)

![](_png/Pasted%20image%2020240721173246.png)

Так же можно представить ситуацию, когда у нас несколько разных маршрутизаторов для внутренней частной сети и один для выхода в интернет. В этом случае нам нужно иметь две отдельные записи для каждой сети (одна для внутренней сети, а другая со шлюзом по умолчанию для выхода в открытый интернет).

Если присутствуют проблемы с выходом в интернет, то стит начать с проверки таблитц маршрутизации и проверки дефолтного шлюза для выхода в сеть.

![](_png/Pasted%20image%2020240721173652.png)

`ip link` - перечисление изменение интерфейсов на хосте
`ip addr` - просмотр адресов назначенных этим интерфейсом
`ip addr add` - предусмотрен для установки адресов на интерфейс
`ip route` - просмотр таблицы маршрутизации. 
`ip route add` - используется для добавления адреса в таблицу маршрутизации

Чтобы сохранить внесённые изменения даже после перезагрузки, нужно установить их в конфиг роутов в `/etc/*` своего дистрибутива 

![](_png/Pasted%20image%2020240721174550.png)

## Трансляция сетевых адресов















## Сети в VM















## Domain Name System















## Инструменты диагностики сети















## Устранение проблем
































