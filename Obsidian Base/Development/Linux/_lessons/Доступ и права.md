
## Учетные записи 

- Контроль доступа - это метод аутентификации в системе по логину/паролю
- PAM - модули аутентификации в ПО / службах на линуксе
- Network Security - контролирует службы, взаимодействующие с сетью
- SSH (secure shell) - используется для удалённого доступа к серверу по незащищённой сети. Нужно для авторизованного использования удалённой машины
- SELinux - безопасность для машин в одной сети

![](_png/Pasted%20image%2020240730195444.png)

В системе линукс может быть сразу несколько пользователей. Каждый из них имеет свой логин, пароль и уникальный идентификатор (`u(ser)id`), по которому система и различает пользователей.

Информация об учётной записи пользователя находится в `etc/passwd`.

Группа в линуксе - это совокопность пользователей. Служит для организации пользователей на основе общих атрибутов (роли/функции).

Информация о группах хранится в `etc/group`. Группы определяются по `g(roup)id`.

Группы можно использовать например для того, чтобы разделять возможности разных пользователей в системе. Одни пользователи - разработчики, а другие - дизайнеры и всем нужны разные уровни доступа на некоторые файлы.

![](_png/Pasted%20image%2020240730200419.png)

Каждому пользователю присвоен идентификатор и группа. Если при создании пользователя группу не указали, то `gid === uid`. 

Так же в информации о пользователе можно найти его дефолтный каталог и информацию о его `shell` 

![](_png/Pasted%20image%2020240730201604.png)

Так же в линуксе существует множество других видов аккаунтов:

- root - суперпользователь, который имеет полный контроль над системой
- системные - это учётные записи с uid от 100 до 500 (или 1000), которые не имеют собственного корневого каталога. Зачастую, это системные либо установленные службы (caddy, docker и так далее), которые запущены в системе
- пользовательские - аккаунты пользователей системы (до 65534)

![](_png/Pasted%20image%2020240730202131.png)

Команды:
- id - информация об определённом пользователе
- who - выведет, кто находится в системе
- w - смесь who и uptime
- last - отображает информацию о последних сеансах входа пользователей

![](_png/Pasted%20image%2020240730202649.png)

Так же через командную строку мы можем переключать пользователей.

`su` позволит переключиться на любого другого пользователя в системе, включая root (если знать его пароль)

Это не самый удобный способ. Лучше него использовать обычное `sudo` выполнение.

![](_png/Pasted%20image%2020240730202638.png)

Все конфигурации того, что можно делать с помощью `sudo`, определяются в `etc/sudoers`. Так же там внесены пользователи, которым можно предоставить повышение прав (операция от root) за счёт использования `sudo`. 

Настройка `nologin` запретит использование root-прав в системе.

Язык разметки для `sudo` - [EBNF](https://en.wikipedia.org/wiki/Extended_Backus–Naur_form).

![](_png/Pasted%20image%2020240730203425.png)

## Управление пользователями 

- `useradd` - добавление пользователя
- в `etc/passwd` можно будет увидеть, что был создан пользователь с его группой
- `etc/shadow` - содержит информацию о выделенной системе
- `passwd` - позволит установить пароль пользователю. Если без аргументов, то устанавливаем пароль себе, если с `sudo` и указанием имени юзера, то для другого пользователя
- `whoami` - выведет текущего пользователя

![](_png/Pasted%20image%2020240730204238.png)

Так же команда `useradd` используется зачастую с дополнительными аргументами, которые позволят настроить группу, идентификатор, корневой каталог и другие параметры

![](_png/Pasted%20image%2020240730204343.png)

- `userdel` - удалит пользователя из системы
- `groupadd` - позволит создать группу
- `groupdel` - удалит группу

![](_png/Pasted%20image%2020240730205042.png)

## Файлы управления доступом 

Все файлы управления доступом располагаются в `/etc`, которые может просмотреть каждый, но изменить только рут.

`vipw` и `vigr` созданы для просмотра данных доступа в системе

![](_png/Pasted%20image%2020240802201323.png)

`etc/password`
- `name` - имя пользователя
- `password` - тип пароля (`x` - можно поменять, `!` - нельзя)
- `uid` - идентификатор пользователя
- `gid` - идентификатор группы
- `gecos` - это дополнительная информация о пользователе в формате CSV
- `homedir` - домашная директория
- `shell` - дефолтный шелл

`/etc/shadow`
- `username` - имя пользователя 
- `password` - хеш пароля
- `lastchange` - дата последнего изменения
- `minage` - минимальный возраст после которого можно поменять пароль
- `maxage` - максимальный возраст пароля до смены
- `warn` - время уведомления о смене перед сменой пароля
- `inactive` - время отключения учётки при неактивности
- `expdate` - время протухания учётки

`/etc/group`
- `name` - группа
- `password` - тип пароля
- `gid` - идентификатор группы
- `members` - члены группы

![](_png/Pasted%20image%2020240802201822.png)

## Разрешения файла 



![](_png/Pasted%20image%2020240802203527.png)








## SSH & SCP 












## Про IPTables 












## Настройка IPTables 































